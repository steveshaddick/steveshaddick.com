function csrfSafeMethod(a){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(a)}var MailList=function(){function a(){j=$("#mailList"),l=$("#footer"),j.on("mouseenter",e).on("mouseleave",f),k=$("#txtEmail")}function b(a){switch(o&&(clearTimeout(o),o=setTimeout(g,5e3)),a.which){case 32:case 39:case 34:case 96:return a.preventDefault(),!1;case 13:return c(),!1}m&&(m=!1,$("#emailError").addClass("displayNone"))}function c(){var a=k.val();return""!=a&&i(a)?(g(),k.val(""),$.ajax("/newsletter/signup/",{cache:!1,data:{email:a},success:d,type:"post",error:function(){d({success:"false"})}}),void 0):(h(),void 0)}function d(a){a&&a.success===!0?Main.showAlert("/static/html/emailSuccess.html"):Main.showAlert("/static/html/emailError.html")}function e(){o&&clearTimeout(o),n||(n=!0,l.addClass("show-maillist"),k.on("keydown",b))}function f(){o=setTimeout(g,1700)}function g(){n=!1,l.removeClass("show-maillist"),k.off("keydown",b).blur()}function h(){m=!0,$("#emailError").removeClass("displayNone")}function i(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)}var j,k,l=!1,m=!1,n=!1,o=null;return{init:a,submitEmail:c}}(),Work=function(){function a(){i=$("#workWrapper"),k=$("#noWork"),j=$("#thumbsWrapper"),m=$("#videoPlayerContainer"),Video.init({videoPath:"http://video.steveshaddick.com"}),l=k.parent(),j.on("mouseenter",".work-thumb",b),j.on("mouseleave",".thumb-over-img",d),j.on("mouseleave",c)}function b(){var a=$(this);if(a.data("isOver")!==!0){a.data("isOver",!0),$(".thumb-over-img",j).mouseleave();var b=$('<img class="thumb-over-img transition small" src="'+$("img",a).attr("src")+'" alt="">'),c=$("#cls .thumb-over-info").clone();$(".title",c).html(a.attr("data-title")),$(".type",c).html(a.attr("data-type")),b.data("info",c),a.append(b),b.data("to1",setTimeout(function(){b.removeClass("small")},0)),a.append(c),b.data("to2",setTimeout(function(){c.removeClass("hold-high")},250))}}function c(a){var b=$(a.target);b.hasClass("thumb-img")?$(".thumb-over-img",b.parent()).mouseleave():b.hasClass("thumbs-wrapper")&&$(".thumb-over-img",j).mouseleave()}function d(){var a=$(this),b=a.data("info").offset(),c=a.data("info");a.data("info").css({top:b.top-$(window).scrollTop(),left:b.left}),$("#dropOverlay").append(c),a.addClass("small"),setTimeout(function(){c.css("top","").addClass("drop")},10),clearTimeout(a.data("to1")),clearTimeout(a.data("to2")),setTimeout(function(){a.parent().data("isOver",!1),a.remove()},350),setTimeout(function(){c.remove()},500)}function e(){$.contains(document.documentElement,k[0])||g({type:"nowork"}),setTimeout(function(){$(".me-blurry",k).removeClass("out")},0)}function f(){if(n)switch($("#work_"+n.id).removeClass("selected"),n.type){case"video":Video.clearVideo();var a=$("#cls .video-swap").clone();a.css({height:m.height(),width:m.width()}),$("#cls").append(m),l.prepend(a)}var b=l;b.addClass("drop"),TransitionController.transitionEnd(b,function(){b.remove()})}function g(a){f(),n=a,l=$("#cls .work-content").clone(),a.title&&$("h1",l).html(a.title),a.specs&&""!==a.specs&&$(".work-specs",l).html(a.specs),a.info&&""!==a.info?$(".work-info",l).html(a.info):$(".work-info",l).remove(),$("#work_"+a.id).addClass("selected");var b=!1;switch(a.type){case"video":l.prepend(m),b=function(){Video.playVideo(a)};break;case"website":var c=a.url.replace("http://","");"/"===c.charAt(c.length-1)&&(c=c.slice(0,-1)),$(".work-link",l).attr("href",a.url).html(c);var d=$("#cls .web-container").clone();d.attr("href",a.url),""===$(".work-specs",l).html()&&$(".work-specs",l).html("website"),$(".big-image",d).attr("src",a.image),l.prepend(d);break;case"404":var e=$("#cls .four-oh-four-container").clone();a.text&&$(".text",e).html(a.text),a.randomWork&&$(".redirect-link",e).attr("href","/#/"+a.randomWork),l.prepend(e);break;case"nowork":l.prepend(k)}i.append(l),setTimeout(function(){l.removeClass("hold-high"),b&&TransitionController.transitionEnd(l,b)},10)}function h(a){$.post("/work/"+a+"/",{},function(a){a?g(a):(a={id:"4O4",type:"404"},g(a))})}var i=!1,j=!1,k=!1,l=!1,m=!1,n=!1;return{init:a,getWork:h,showNoWork:e}}(),Main=function(){function a(a){$.ajaxSetup({crossDomain:!1,beforeSend:function(a,b){csrfSafeMethod(b.type)||a.setRequestHeader("X-CSRFToken",Cookie.get("csrftoken"))}}),Modernizr.csstransitions||TransitionController.setAutoWait(350),MailList.init(),Work.init(),WindowResize.addHandler(e),$(".nav-link.work").on("click",function(){"who"===f&&(window.location="/#/"+g),$("html, body").animate({scrollTop:$("#thumbsWrapper").offset().top},350)}),SWFAddress.onChange=b,a.needUrlCheck&&$.get("/check-urls/")}function b(){var a=SWFAddress.getPathNames();if(g=f,a.length>0)switch($("html, body").animate({scrollTop:0},350),a[0]){case"who":Video.pauseVideo(),"undefined"!=typeof f&&$("#whoBackLink").attr("href","/#/"+f),$("body").addClass("page-who");break;default:$("body").removeClass("page-who"),"who"!==g&&Work.getWork(a[0])}else $("body").removeClass("page-who"),Work.showNoWork();f=a[0]}function c(a,b){d(!0);var c=$("#alertOverlayBox");$("#alertOverlay").removeClass("displayNone"),c.load(a,null,b).addClass("transition").removeClass("reset")}function d(a){var b=$("#alertOverlayBox");b.html("").removeClass("transition").addClass("reset"),a!==!0&&$("#alertOverlay").addClass("displayNone")}function e(){var a=0,b=!1,c=!1,d=0,e=0,f=0;$(".thumb-item-wrapper").removeClass("right-side").each(function(){c=$(this),d=c.offset().top,b&&d!=a&&(b.addClass("right-side"),f=e,e=0),e++,a=d,b=c,e==f&&c.addClass("right-side")})}var f="",g="";return{init:a,showAlert:c,closeAlert:d}}(),TransitionController=function(){function a(a,b,c){"undefined"==typeof c&&(c=e),0>c?(a.unbind(d),a.bind(d,function(){a.unbind(d),b(a)})):setTimeout(function(){b(a)},c)}function b(a){e=a}var c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",transition:"transitionend"},d=c[Modernizr.prefixed("transition")],e=-1;return{transitionEnd:a,setAutoWait:b}}(),Video=function(){function a(a){"undefined"==typeof a.nativeControls&&(a.nativeControls=!1),"undefined"==typeof a.trueFullscreen&&(a.trueFullscreen=!0),"undefined"==typeof a.fullscreenHandler&&(a.fullscreenHandler=function(){}),"undefined"==typeof a.normalscreenHandler&&(a.normalscreenHandler=function(){}),"undefined"==typeof a.videoPath&&(a.videoPath=""),f=new SimpleVideo("simpleVideo",{nativeControls:a.nativeControls,allowFullscreen:!$("html").is(".ie7, .ie8"),trueFullscreen:a.trueFullscreen,onFullscreen:a.fullscreenHandler,onNormalscreen:a.normalscreenHandler}),i=a.videoPath+"/"}function b(a){return h?(f.setFile([{src:i+a.videoFile,type:"video/mp4"}],"audio"===a.type),"undefined"==typeof a.allowScrub&&(a.allowScrub=!0),f.setScrub(a.allowScrub),"undefined"==typeof a.hasAudio&&(a.hasAudio=!0),f.setHasAudio(a.hasAudio),f.setRepeat(a.loop),f.play(),void 0):(f.init(function(){h=!0}),clearTimeout(g),setTimeout(function(){b(a)},100),void 0)}function c(){h&&f.pause()}function d(){h&&f.play()}function e(){h&&f.clear()}var f,g,h=!1,i="/";return{init:a,playVideo:b,clearVideo:e,pauseVideo:c,resumeVideo:d}}();