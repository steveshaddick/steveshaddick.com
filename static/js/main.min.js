function csrfSafeMethod(a){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(a)}var MailList=function(){function a(){j=$("#mailList"),l=$("#footer"),j.on("mouseenter",e).on("mouseleave",f),k=$("#txtEmail")}function b(a){switch(o&&(clearTimeout(o),o=setTimeout(g,5e3)),a.which){case 32:case 39:case 34:case 96:return a.preventDefault(),!1;case 13:return c(),!1}m&&(m=!1,$("#emailError").addClass("displayNone"))}function c(){var a=k.val();return""!=a&&i(a)?(g(),k.val(""),$.ajax("/newsletter/signup/",{cache:!1,data:{email:a},success:d,type:"post",error:function(){d({success:"false"})}}),void 0):(h(),void 0)}function d(a){a&&a.success===!0?Main.showAlert("/static/html/emailSuccess.html"):Main.showAlert("/static/html/emailError.html")}function e(){o&&clearTimeout(o),n||(n=!0,l.addClass("show-maillist"),k.on("keydown",b))}function f(){o=setTimeout(g,1700)}function g(){n=!1,l.removeClass("show-maillist"),k.off("keydown",b).blur()}function h(){m=!0,$("#emailError").removeClass("displayNone")}function i(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)}var j,k,l=!1,m=!1,n=!1,o=null;return{init:a,submitEmail:c}}(),Work=function(){function a(){g=$("#workWrapper"),i=$("#noWork"),h=$("#thumbsWrapper"),k=$("#videoPlayerContainer"),Video.init({videoPath:"http://video.steveshaddick.com"}),j=i.parent(),h.on("mouseenter",".work-thumb",b),h.on("mouseleave",".thumb-over-img",c)}function b(){var a=$(this);if(a.data("isOver")!==!0){a.data("isOver",!0);var b=$('<img class="thumb-over-img transition small" src="'+$("img",a).attr("src")+'" alt="">'),c=$("#cls .thumb-over-info").clone();$(".title",c).html(a.attr("data-title")),$(".type",c).html(a.attr("data-type")),b.data("info",c),a.append(b),b.data("to1",setTimeout(function(){b.removeClass("small")},5)),a.append(c),b.data("to2",setTimeout(function(){c.removeClass("hold-high")},250))}}function c(){var a=$(this),b=a.data("info").offset(),c=a.data("info");a.data("info").css({top:b.top-$(window).scrollTop(),left:b.left}),$("#dropOverlay").append(c),a.addClass("small"),setTimeout(function(){c.css("top","").addClass("drop")},10),clearTimeout(a.data("to1")),clearTimeout(a.data("to2")),setTimeout(function(){a.parent().data("isOver",!1),a.remove()},350),setTimeout(function(){c.remove()},500)}function d(){}function e(){$(".me-blurry",i).removeClass("out")}function f(a){$.post("/work/"+a+"/",{},function(a){if(a&&a.success){if(l)switch($("#work_"+l.id).removeClass("selected"),l.type){case"video":Video.clearVideo();var b=$("#cls .video-swap").clone();b.css({height:k.height(),width:k.width()}),$("#cls").append(k),j.prepend(b)}var c=j;c.addClass("drop"),TransitionController.transitionEnd(c,function(){c.remove()}),l=a,j=$("#cls .work-content").clone(),$("h1",j).html(a.title),""!=a.specs&&$(".work-specs",j).html(a.specs),""!=a.info?$(".work-info",j).html(a.info):$(".work-info",j).remove(),$("#work_"+a.id).addClass("selected");var e=!1;switch(a.type){case"video":j.prepend(k),e=function(){};break;case"website":var f=a.url.replace("http://","");"/"==f.charAt(f.length-1)&&(f=f.slice(0,-1)),$(".work-link",j).attr("href",a.url).html(f),$webContainer=$("#cls .web-container").clone(),$webContainer.attr("href",a.url),$(".big-image",$webContainer).attr("src",a.image),j.prepend($webContainer)}g.append(j),setTimeout(function(){j.removeClass("hold-high"),e&&TransitionController.transitionEnd(j,e)},10)}else d()})}var g=!1,h=!1,i=!1,j=!1,k=!1,l=!1;return{init:a,getWork:f,showNoWork:e}}(),Main=function(){function a(a){$.ajaxSetup({crossDomain:!1,beforeSend:function(a,b){csrfSafeMethod(b.type)||a.setRequestHeader("X-CSRFToken",Cookie.get("csrftoken"))}}),Modernizr.csstransitions||TransitionController.setAutoWait(350),MailList.init(),Work.init(),$(".nav-link.work").on("click",function(){"who"==e&&(window.location="/#"),$("html, body").animate({scrollTop:$("#thumbsWrapper").offset().top},350)}),SWFAddress.onChange=b,a.needUrlCheck&&$.get("/check-urls/")}function b(){var a=SWFAddress.getPathNames();if(e=a,a.length>0)switch($("html, body").animate({scrollTop:0},350),a[0]){case"who":$("body").addClass("page-who");break;default:$("body").removeClass("page-who"),Work.getWork(a[0])}else $("body").removeClass("page-who"),Work.showNoWork()}function c(a,b){d(!0);var c=$("#alertOverlayBox");$("#alertOverlay").removeClass("displayNone"),c.load(a,null,b).addClass("transition").removeClass("reset")}function d(a){var b=$("#alertOverlayBox");b.html("").removeClass("transition").addClass("reset"),a!==!0&&$("#alertOverlay").addClass("displayNone")}var e="";return{init:a,showAlert:c,closeAlert:d}}(),TransitionController=function(){function a(a,b,c){"undefined"==typeof c&&(c=e),0>c?(a.unbind(d),a.bind(d,function(){a.unbind(d),b(a)})):setTimeout(function(){b(a)},c)}function b(a){e=a}var c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",transition:"transitionend"},d=c[Modernizr.prefixed("transition")],e=-1;return{transitionEnd:a,setAutoWait:b}}(),Video=function(){function a(a){"undefined"==typeof a.nativeControls&&(a.nativeControls=!1),"undefined"==typeof a.trueFullscreen&&(a.trueFullscreen=!0),"undefined"==typeof a.fullscreenHandler&&(a.fullscreenHandler=function(){}),"undefined"==typeof a.normalscreenHandler&&(a.normalscreenHandler=function(){}),"undefined"==typeof a.videoPath&&(a.videoPath=""),f=new SimpleVideo("simpleVideo",{nativeControls:a.nativeControls,allowFullscreen:!$("html").is(".ie7, .ie8"),trueFullscreen:a.trueFullscreen,onFullscreen:a.fullscreenHandler,onNormalscreen:a.normalscreenHandler}),i=a.videoPath+"/"}function b(a){return h?(f.setFile([{src:i+a.videoFile,type:"video/mp4"}],"audio"===a.type),"undefined"==typeof a.allowScrub&&(a.allowScrub=!0),f.setScrub(a.allowScrub),"undefined"==typeof a.hasAudio&&(a.hasAudio=!0),f.setHasAudio(a.hasAudio),f.setRepeat(a.loop),f.play(),void 0):(f.init(function(){h=!0}),clearTimeout(g),setTimeout(function(){b(a)},100),void 0)}function c(){h&&f.pause()}function d(){h&&f.play()}function e(){h&&f.clear()}var f,g,h=!1,i="/";return{init:a,playVideo:b,clearVideo:e,pauseVideo:c,resumeVideo:d}}();