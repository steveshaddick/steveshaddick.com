var MailList = function() {
    var a;
    var b;
    var c = false;
    var d = false;
    var e = null;
    function f() {
        a = $("#mailList");
        a.on("mouseenter", j).on("mouseleave", k);
        b = $("#txtEmail");
    }
    function g(a) {
        if (e) {
            clearTimeout(e);
            e = setTimeout(l, 5e3);
        }
        switch (a.which) {
          case 32:
          case 39:
          case 34:
          case 96:
            a.preventDefault();
            return false;
            break;

          case 13:
            h();
            return false;
            break;
        }
        if (c) {
            c = false;
            $("#emailError").addClass("displayNone");
        }
    }
    function h() {
        var a = b.val();
        if (a == "" || !n(a)) {
            m();
            return;
        }
        l();
        b.val("");
        $.ajax("/ajax/submitEmail", {
            cache: false,
            data: {
                txtEmail: a,
                a: GLOBAL.a
            },
            success: i,
            type: "post",
            error: function() {
                i({
                    success: "false"
                });
            }
        });
    }
    function i(a) {
        if (a && a.success === true) {
            Main.showAlert("/views/emailSuccess.html");
        } else {
            Main.showAlert("/views/emailError.html");
        }
    }
    function j() {
        if (e) {
            clearTimeout(e);
        }
        if (d) return;
        d = true;
        a.addClass("open");
        b.bind("keydown", g);
    }
    function k() {
        e = setTimeout(l, 2e3);
    }
    function l() {
        d = false;
        a.removeClass("open");
        b.unbind("keydown", g).blur();
    }
    function m() {
        c = true;
        $("#emailError").removeClass("displayNone");
    }
    function n(a) {
        var b = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return b.test(a);
    }
    return {
        init: f,
        submitEmail: h
    };
}();

function csrfSafeMethod(a) {
    return /^(GET|HEAD|OPTIONS|TRACE)$/.test(a);
}

var Work = function() {
    var a = false;
    function b() {
        a = $("#noWork");
        $(".me-blurry", a).removeClass("out");
    }
    function c() {
        $.post("/work/getwork", {}, function() {});
    }
    return {
        init: b
    };
}();

var Main = function() {
    function a(a) {
        $.ajaxSetup({
            crossDomain: false,
            beforeSend: function(a, b) {
                if (!csrfSafeMethod(b.type)) {
                    a.setRequestHeader("X-CSRFToken", Cookie.get("csrftoken"));
                }
            }
        });
        Work.init();
        if (a.needUrlCheck) {
            $.post("/check-urls/", {});
        }
    }
    return {
        init: a
    };
}();