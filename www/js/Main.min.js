"undefined"==typeof console&&(console={log:function(){}});var GLOBAL={windowHeight:0,windowWidth:0,mode:"wide",netCom:!1,transitionEnd:"transitionend",works:[],selectedWork:null,siteReady:!1,webkit:!1,userAgent:"",myScroll:null,scrollAmount:30,os:"",a:"555"},TransitionController=function(){function e(e,t){Modernizr.csstransitions?(e.unbind(GLOBAL.transitionEnd),e.bind(GLOBAL.transitionEnd,function(){e.unbind(GLOBAL.transitionEnd),t(e)})):t(e)}return{transitionEnd:e}}(),EventDispatcher=function(){function e(e,t){s[e]===void 0&&(s[e]=[]);for(var i=0;s[e].length>i;i++)if(s[e][i]==t)return;s[e].push(t)}function t(e,t){if(void 0!==s[e]){for(var i=s[e].length-1;i>=0;i--)s[e][i]==t&&s[e].splice(i,1);0==s[e].length&&(s[e]=void 0)}}function i(e,t){if(void 0!==s[e])for(var i=0;1>i;i++)s[e][i](t)}var s=[];return{addEventListener:e,removeEventListener:t,dispatchEvent:i}}(),Video=function(){function e(){o=new SimpleVideo("simpleVideo",{nativeControls:"iPhone"==GLOBAL.userAgent||"iPad"==GLOBAL.userAgent,allowFullscreen:!$("html").is(".ie7, .ie8"),trueFullscreen:"safari"!=GLOBAL.userAgent,onFullscreen:Main.fullscreenHandler,onNormalscreen:Main.normalscreenHandler}),"iPhone"==GLOBAL.userAgent&&(l="/video/iphone/")}function t(e){return a&&GLOBAL.siteReady?(o.setFile([{src:l+e.identifier+".mp4",type:"video/mp4"},{src:l+e.identifier+".ogv",type:"video/ogg"}],"audio"==e.medium),o.setScrub("10-sunsets-5-minutes"!=e.identifier),o.setRepeat(1==e.videoRepeat),o.play(),void 0):(o.init(function(){a=!0}),clearTimeout(r),setTimeout(function(){t(e)},100),void 0)}function i(){a&&o.pause()}function s(){a&&o.play()}function n(){a&&o.clear()}var o,r,a=!1,l="/video/";return{init:e,playVideo:t,clearVideo:n,pauseVideo:i,resumeVideo:s}}(),WorkContainer=function(){function e(){b=$("#workContainer"),y=$("#clsWorkInfo"),k=$("#noWork"),x=$("#videoPlayerContainer"),g=$("body"),B=parseInt(g.css("min-height").replace("px","")),I=$("#imageLink"),L=$("#imageLinkImage"),T=$("#imageLinkLink"),F=$("#lightboxContainer")}function t(e){if(!GLOBAL.netCom&&N!=e){switch(N=e,_&&(_.removeClass("dropIn").addClass("dropOut").css({top:GLOBAL.windowHeight+25}),TransitionController.transitionEnd(_,i),_=null),A&&(A.$thumb.removeClass("highlight"),A=null),O){case"video":Video.clearVideo();break;case"noWork":}if(-1==e)return s({previewType:"noWork"}),void 0;GLOBAL.netCom=!0,$.ajax({url:"/ajax/getWork",type:"POST",data:{workId:e,a:GLOBAL.a},success:s}),_=y.clone().attr("id","workInfo_"+e),S=$(".workTitle",_),w=$(".workSpecs span",_),C=$(".workLink",_),E=$(".workDescription",_),A=GLOBAL.works[e],GLOBAL.selectedWork=A,S.html(A.title),A.$thumb.addClass("highlight"),w.html("Fetching..."),b.prepend(_),setTimeout(function(){_.removeClass("reset").addClass("dropIn")},1)}}function i(e){e.remove()}function s(e){if(GLOBAL.netCom=!1,D=e,O!=e.previewType)switch(O){case"video":r();break;case"imagelink":d();break;case"lightbox":m();break;case"noWork":c()}switch(e.previewType){case"video":case"imagelink":case"lightbox":switch(e.previewType){case"video":n();break;case"imagelink":h();break;case"lightbox":f()}w.html(e.specs),E.html(e.info);var t=E.height()+520;switch(t>B?Footer.showSignature(void 0,t):Footer.showSignature(void 0,B),GLOBAL.userAgent){case"iPad":case"iPhone":WorkThumbsContainer.releaseThumbOver()}break;case"noWork":l()}}function n(){return"video"==O?(o(),void 0):(O="video",x.removeClass("reset").addClass("dropIn").css({top:""}),TransitionController.transitionEnd(x,o),void 0)}function o(){Video.playVideo(D)}function r(){x.removeClass("dropIn").addClass("dropOut").css({top:GLOBAL.windowHeight+25}),TransitionController.transitionEnd(x,a)}function a(){x.removeClass("dropOut").addClass("reset").css({top:""})}function l(){"noWork"!=O&&(O="noWork",k.unbind(GLOBAL.transitionEnd),k.removeClass("reset dropOut"),setTimeout(function(){k.addClass("dropIn").css({top:""})},1))}function c(){k.removeClass("dropIn").addClass("dropOut").css({top:GLOBAL.windowHeight+25}),TransitionController.transitionEnd(k,u)}function u(){k.removeClass("dropOut").addClass("reset").css({top:""})}function h(){L.attr("src","images/workImages/"+D.image),T.attr("href","http://"+D.link).attr("title",D.title),C.attr("href","http://"+D.link).attr("title",D.title).html(D.link),"imagelink"!=O&&(O="imagelink",I.unbind(GLOBAL.transitionEnd),I.removeClass("reset dropOut").addClass("dropIn").css({top:""}))}function d(){I.removeClass("dropIn").addClass("dropOut").css({top:GLOBAL.windowHeight+25}),TransitionController.transitionEnd(I,p)}function p(){I.removeClass("dropOut").addClass("reset").css({top:""})}function f(){F.html("");for(var e,t=0;D.lightboxCount>t;t++)e=$("#clsLightboxItem").clone(),e.attr("id","").attr("href","images/workImages/"+D.identifier+"/"+D.identifier+"-"+(t+1)+".jpg").attr("rel",e.attr("rel").replace("$IDENTIFIER",D.identifier)).attr("title",""),0==t?$(".lightboxItemImage",e).attr("src","images/workImages/"+D.identifier+"/"+D.identifier+"-1.jpg"):($(".lightboxItemImage",e).remove(),e.addClass("displayNone")),F.append(e);e=null,"lightbox"!=O&&(O="lightbox",F.unbind(GLOBAL.transitionEnd),F.removeClass("reset dropOut").addClass("dropIn").css({top:""}))}function m(){F.removeClass("dropIn").addClass("dropOut").css({top:GLOBAL.windowHeight+25}),TransitionController.transitionEnd(F,v)}function v(){F.removeClass("dropOut").addClass("reset").css({top:""})}var b,g,_,y,S,w,C,E,k,x,F,I,L,T,O,D,A,N,B=0;return{init:e,getWork:t}}(),WorkThumbsContainer=function(){function e(){m=$("#workThumbsContainer"),v=$("#workThumbsWrapper"),b=$("#thumbsScroller"),$thumbsScrollThumb=$("#thumbsScrollThumb"),T=25,L=25,g=GLOBAL.windowWidth-690,g>900&&(g=900),_=GLOBAL.windowHeight-60,v.css({width:g+50,height:_+60}),b.css({height:GLOBAL.windowHeight-75}),b.removeClass("displayNone").css({left:GLOBAL.windowWidth+25}),I=Math.floor((g-50)/(x+F)),1>I&&(I=1),f=[];var e,t=0,i=T;$.each($(".workThumb",m),function(s,n){e=$(n);var a;switch(GLOBAL.userAgent){case"iPhone":case"iPad":a={"-webkit-transform":"translate3d(0px,"+(GLOBAL.windowHeight+100)+"px,0)"};break;default:a={top:GLOBAL.windowHeight+100,left:i}}e.css(a),GLOBAL.works[e[0].id.replace("workThumb_","")]={title:$(".thumbTitle",e).html(),$thumb:e},e.mouseenter(r),e.click(o),i+=x+F,t++,t>=I&&(t=0,i=T),f.push(e)})}function t(){T=25,L=25,g=GLOBAL.windowWidth-690,g>900&&(g=900),_=GLOBAL.windowHeight-60,v.css({width:g+50,height:_+60}),b.css({height:GLOBAL.windowHeight-75});var e=Math.floor((g-50)/(x+F));return 1>e&&(e=1),e==I?(w!=b.height()&&s(),void 0):(I=e,i(),void 0)}function i(e){e===void 0&&(e=!0);var t=A?!1:!0;A=!0;for(var i,n=0,o=T,r=L,a=0,l=0,c=0,u=0;f.length>u;u++){if(e)if(l=.75,t)switch(c=Math.random()+.15,l+c>a&&(a=l+c),GLOBAL.userAgent){case"iPhone":case"iPad":i={"-webkit-transition-duration":l+"s","-webkit-transition-delay":c+"s","-webkit-transform":"translate3d(0px,0px,0)"};break;default:i={"-moz-transition-duration":l+"s","-webkit-transition-duration":l+"s","-o-transition-duration":l+"s","-ms-transition-duration":l+"s","-moz-transition-delay":c+"s","-webkit-transition-delay":c+"s","-o-transition-delay":c+"s","-ms-transition-delay":c+"s",top:r,left:o}}else switch(GLOBAL.userAgent){case"iPhone":case"iPad":i={"-webkit-transition-duration":l+"s","-webkit-transition-delay":"","-webkit-transform":"translate3d(0px,0px,0)"};break;default:i={"-moz-transition-duration":l+"s","-webkit-transition-duration":l+"s","-o-transition-duration":l+"s","-ms-transition-duration":l+"s","-moz-transition-delay":"","-webkit-transition-delay":"","-o-transition-delay":"","-ms-transition-delay":"",top:r,left:o}}else i={top:r,left:o};f[u].css(i),o+=x+F,n++,n>=I&&(n=0,o=T,r+=x+F)}b.css({left:I*(x+F)+T+25}),S=r+60,s(),clearTimeout(O),e&&(O=setTimeout(function(){A=!1;for(var e=0;f.length>e;e++)f[e].css({"transition-duration":"","-moz-transition-duration":"","-webkit-transition-duration":"","-o-transition-duration":"","-ms-transition-duration":"","transition-delay":"","-moz-transition-delay":"","-webkit-transition-delay":"","-o-transition-delay":"","-ms-transition-delay":""});EventDispatcher.dispatchEvent("thumbsLayout")},1e3*a))}function s(){if(GLOBAL.myScroll)return setTimeout(function(){GLOBAL.myScroll.refresh()},500),void 0;w=b.height(),$thumbsScrollThumb.unbind("mousedown").unbind("mouseenter").unbind("mouseleave"),v.unbind("mousewheel",n),$(document).unbind("mouseup",h),$(document).unbind("mousemove",d);var e=N/B;if(y=S-w,y>0){var t=w-y;if(50>t&&(t=50),B=w-t,$thumbsScrollThumb.removeClass("none").css({height:t}),$thumbsScrollThumb.bind("mousedown",u).bind("mouseenter",l).bind("mouseleave",c),v.bind("mousewheel",n),N=B*e,GLOBAL.selectedWork){var i=GLOBAL.selectedWork.$thumb[0].style.top.replace("px","");i>w-N&&(N=i-60,N>y&&(N=B),N=N*B/y)}}else N=0,$thumbsScrollThumb.addClass("none");$thumbsScrollThumb.css({top:N}),m.addClass("transition").css({top:-y*(N/B)}),TransitionController.transitionEnd(m,function(){m.removeClass("transition")})}function n(e,t){0>t?p(GLOBAL.scrollAmount,e):p(-GLOBAL.scrollAmount,e)}function o(){var e=$(this)[0].id.replace("workThumb_","");SWFAddress.setValue(e)}function r(){var e=k=$(this);e.addClass("mouseOver"),$(".thumbImage",e).addClass("mouseOver");var t,i,s=$("#thumbInfo_"+e[0].id.replace("workThumb_","")),n=-m.position().top-50;GLOBAL.webkit?(t={left:e.position().left-10,"-webkit-transform":"translate3d(0,"+n+"px, 0)"},i={"-webkit-transform":"translate3d(0,"+(n+GLOBAL.windowHeight+50)+"px, 0)"}):(t={left:e.position().left-10,top:n},i={top:n+GLOBAL.windowHeight+50}),s.unbind(GLOBAL.transitionEnd).removeClass("dropOut").css(t),clearTimeout(D),D=setTimeout(function(){var t;m.append(s),t=GLOBAL.webkit?{"-webkit-transform":"translate3d(0,"+(e.position().top+x+10)+"px, 0)"}:{top:e.position().top+x+10},s.addClass("dropIn").css(t)},200),e.one("mouseleave",function(){k=null,e.removeClass("mouseOver"),clearTimeout(D),$(".thumbImage",e).removeClass("mouseOver"),s.removeClass("dropIn").addClass("dropOut").css(i),TransitionController.transitionEnd(s,function(){s.removeClass("dropOut").removeAttr("style"),e.append(s)})})}function a(){setTimeout(function(){k&&k.trigger("mouseleave")},1e3)}function l(){$thumbsScrollThumb.addClass("mouseOver")}function c(){C||$thumbsScrollThumb.removeClass("mouseOver")}function u(e){e.preventDefault(),C=!0,E=e.pageY,$(document).bind("mouseup",h),$(document).bind("mousemove",d)}function h(){C=!1,$thumbsScrollThumb.removeClass("mouseOver"),$(document).unbind("mousemove",d)}function d(e){p(e.pageY-E,e)}function p(e,t){N+=e,N>B?N=B:0>N?N=0:E=t.pageY,$thumbsScrollThumb.css({top:N}),m.css({top:-y*(N/B)})}var f,m,v,b,g,_,y,S,w,C,E,k,x=50,F=10,I=0,L=0,T=0,O=null,D=null,A=!1,N=0,B=1;return{init:e,resize:t,layoutThumbs:i,releaseThumbOver:a}}(),Footer=function(){function e(){o=$("#footer"),n=$("#signature"),r=$("#who"),l=parseInt($("body").css("min-height").replace("px","")),r.css({top:GLOBAL.windowHeight+50}).removeClass("displayNone")}function t(){i()}function i(e,t){if(a){if(t!==void 0&&(l=t),!GLOBAL.siteReady&&e===void 0)return;var i=GLOBAL.windowHeight;l>i&&(i=l),i-=n.height(),c=i,n.css({top:c}),r.css({top:c+21}),e!==void 0&&TransitionController.transitionEnd(n,e)}else c=void 0,r.css({top:GLOBAL.windowHeight+50})}function s(e){e!=a&&(a=e,a?(r.removeClass("displayNone"),o.removeClass("who").addClass("main")):(n.css({top:""}),o.removeClass("main").addClass("who"),r.addClass("displayNone")))}var n,o,r,a,l,c;return{init:e,resize:t,showSignature:i,setBottom:s}}(),MailList=function(){function e(){c=$("#mailList"),c.bind("mouseenter",n).bind("mouseleave",o),u=$("#txtEmail")}function t(e){switch(p&&(clearTimeout(p),p=setTimeout(r,5e3)),e.which){case 32:case 39:case 34:case 96:return e.preventDefault(),!1;case 13:return i(),!1}h&&(h=!1,$("#emailError").addClass("displayNone"))}function i(){var e=u.val();return""!=e&&l(e)?(r(),u.val(""),$.ajax("/ajax/submitEmail",{cache:!1,data:{txtEmail:e,a:GLOBAL.a},success:s,type:"post",error:function(){s({success:"false"})}}),void 0):(a(),void 0)}function s(e){e&&e.success===!0?Main.showAlert("/views/emailSuccess.html"):Main.showAlert("/views/emailError.html")}function n(){p&&clearTimeout(p),d||(d=!0,c.addClass("open"),u.bind("keydown",t))}function o(){p=setTimeout(r,2e3)}function r(){d=!1,c.removeClass("open"),u.unbind("keydown",t).blur()}function a(){h=!0,$("#emailError").removeClass("displayNone")}function l(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}var c,u,h=!1,d=!1,p=null;return{init:e,submitEmail:i}}(),Main=function(){function e(e){switch(f=$(window),m=$(document),v=$("body"),a(),$.browser.webkit?GLOBAL.transitionEnd="webkitTransitionEnd":$.browser.msie?GLOBAL.transitionEnd="msTransitionEnd":$.browser.mozilla?GLOBAL.transitionEnd="transitionend":$.browser.opera&&(GLOBAL.transitionEnd="oTransitionEnd"),g=$("#whoWrapper"),_=$("#workWrapper"),y=$("#backLink"),b=$("#siteWrapper"),GLOBAL.userAgent=e.userAgent,e.userAgent){case"iPad":case"iPhone":$("#thumbsScroller").remove(),GLOBAL.myScroll=new iScroll("workThumbsWrapper");break;default:}GLOBAL.os=e.os,"mac"==GLOBAL.os&&(GLOBAL.scrollAmount*=.25),GLOBAL.a=e.a,Video.init(),WorkContainer.init(),WorkThumbsContainer.init(),Footer.init(),MailList.init(),f.resize(function(){C=!0}),setTimeout(c,200),$.browser.webkit&&(GLOBAL.webkit=!0,$("body").removeClass("regular"),$("body").addClass("webkit")),$("html").hasClass("ie7")||$("html").hasClass("ie8")||$("html").hasClass("ie9")?$.cookie("warnIE")?($("#msieWarning").remove(),SWFAddress.onChange=s):($.cookie("warnIE","true",{expires:1e3}),$("#msieWarning").removeClass("displayNone")):($("#msieWarning").remove(),SWFAddress.onChange=s),e.needMeta&&$.ajax("/ajax/getMeta/",{cache:!1,data:{a:GLOBAL.a},success:t,error:function(){$(".linkDescription",$("#noWorkLink")).html("")}})}function t(e){var t=$("#noWorkLink");null!=e&&"true"===e.success?($(".linkTitle",t).html(e.meta.title),$(".linkDescription",t).html(e.meta.description)):t.html('<img src="/images/rando/DSC_0055.jpg" alt="" />')}function i(){$("#msieWarning").remove(),SWFAddress.onChange=s,s()}function s(){var e=SWFAddress.getPathNames();if(e.length>0)switch(e[0]){case"who":E>-1?y.attr("href","#"+E):y.attr("href","#"),n("who");break;default:n("work"),E=e[0],WorkContainer.getWork(e[0])}else n("work"),WorkContainer.getWork(-1)}function n(e){if(e!=S){switch(S){case"who":g.css({top:GLOBAL.windowHeight+50}),TransitionController.transitionEnd(g,o);break;case"work":Video.pauseVideo(),_.css({top:-(GLOBAL.windowHeight+50)})}switch(S=e){case"who":k?(g.css({top:GLOBAL.windowHeight+50}).removeClass("displayNone"),setTimeout(function(){g.css({top:0})},10)):(g.css({top:0}).removeClass("displayNone"),WorkThumbsContainer.layoutThumbs(!1),setTimeout(r,10)),Footer.setBottom(!1);break;case"work":k?(_.css({top:-(GLOBAL.windowHeight+50)}).removeClass("displayNone"),setTimeout(function(){_.css({top:0})},10)):(_.css({top:0}).removeClass("displayNone"),EventDispatcher.addEventListener("thumbsLayout",l),setTimeout(WorkThumbsContainer.layoutThumbs,10)),Footer.setBottom(!0),k&&Footer.showSignature()}}}function o(e){e.addClass("displayNone")}function r(){k=!0,GLOBAL.siteReady=!0}function a(){GLOBAL.windowHeight=m.height(),GLOBAL.windowWidth=m.width(),GLOBAL.mode=840>GLOBAL.windowWidth&&GLOBAL.windowHeight>1e3?"narrow":"wide"}function l(){EventDispatcher.removeEventListener("thumbsLayout",l),Footer.showSignature(r)}function c(){setTimeout(c,200),C&&(b.hasClass("fullscreen")||(a(),WorkThumbsContainer.resize(),Footer.resize(),m.width()-w>1600?(w=(m.width()-1600)/2,b.css({left:w})):(w=0,b.css({left:""})),C=!1))}function u(){b.addClass("fullscreen")}function h(){b.removeClass("fullscreen")}function d(e,t){p(!0);var i=$("#alertOverlayBox");$("#alertOverlay").removeClass("displayNone"),i.load(e,null,t).addClass("transition").removeClass("reset")}function p(e){var t=$("#alertOverlayBox");t.html("").removeClass("transition").addClass("reset"),e!==!0&&$("#alertOverlay").addClass("displayNone")}var f,m,v,b,g,_,y,S,w=0,C=!1,E=-1,k=!1;return{init:e,warningClick:i,fullscreenHandler:u,normalscreenHandler:h,showAlert:d,closeAlert:p}}();