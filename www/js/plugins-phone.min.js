function SimpleVideo(e,t){if(this.$element=$("#"+e),this.$video=null,this.$flash=null,this.flashId=null,this.solution="",this.firstLoad=!1,this.controller=null,this.hideTimeout=null,this.isOver=!1,this.controlsActive=!1,this.isPlaying=!1,this.videoPoster="",this.audioPoster="",this.isVideo=!0,this.state="nomedia",this.canScrub=!0,this.objConfig={defaultVolume:t.defaultVolume!==void 0?t.defaultVolume:.8,nativeControls:t.nativeControls!==void 0?t.nativeControls:!1,allowFullscreen:t.allowFullscreen!==void 0?t.allowFullscreen:!0,trueFullscreen:t.trueFullscreen!==void 0?t.trueFullscreen:!0,onFullscreen:t.onFullscreen!==void 0?t.onFullscreen:null,onNormalscreen:t.onNormalscreen!==void 0?t.onNormalscreen:null,posterPath:t.posterPath!==void 0?t.posterPath:""},this.volume=this.objConfig.defaultVolume,this.solution=document.createElement("video").canPlayType?"html":"flash","html"==this.solution?($(".sv_flashContainer",this.$element).remove(),this.controller=new HTMLController(this)):($(".sv_video",this.$element).remove(),this.controller=new FlashController(this)),this.controller.valid===!1)return this.solution=!1,void 0;if(SimpleVideoEventHandler.addPlayer(e,this.controller),this.videoPoster=$(".sv_videoPoster",this.$element).attr("src"),this.audioPoster=$(".sv_audioOlny",this.$element).attr("src"),this.objConfig.nativeControls)return this.controller.setPoster(this.videoPoster),$(".sv_display",this.$element).remove(),void 0;this.$display=$(".sv_display",this.$element),this.$buffering=$(".sv_buffering",this.$element),this.$audioOnly=$(".sv_audioOnly",this.$element),this.$poster=$(".sv_videoPoster",this.$element),this.$controls=$(".sv_controls",this.$element),this.$restartButton=$(".sv_restart",this.$element),this.$playButton=$(".sv_play",this.$element),this.$pauseButton=$(".sv_pause",this.$element),this.$muteButton=$(".sv_mute",this.$element),this.$unmuteButton=$(".sv_unmute",this.$element),this.$volumeSlider=$(".sv_vslider",this.$element),this.$volumeMarker=$(".sv_vmarker",this.$element),this.$volumeMaxButton=$(".sv_vmax",this.$element),this.$fullscreenButton=$(".sv_fullscreen",this.$element),this.$normalscreenButton=$(".sv_normalscreen",this.$element),this.objConfig.allowFullscreen||(this.$fullscreenButton.addClass("inactive"),this.$normalscreenButton.addClass("inactive")),this.$loadProgress=$(".sv_loaded",this.$element),this.$playProgress=$(".sv_playhead",this.$element),this.$scrubber=$(".sv_scrubber",this.$element),this.bindListeners();var i=this;fullScreenApi.supportsFullScreen&&this.objConfig.trueFullscreen&&$(window).bind("fullscreen-off",function(){i.normalscreen()}),this.setState("volume",{volume:this.volume})}function HTMLController(e){this.sv=e,this.$video=$(".sv_video",e.$element),this.htmlVolume=e.volume,this.loop=!1,this.$video[0].controls=!1,this.valid=!0}function FlashController(e){this.sv=e,this.$flash=$(".sv_flashContainer",e.$element),this.flashId=e.$element[0].id+"_flash",this.flashVolume=e.volume,this.valid=!1,this.flashLoaded=!1,this.$flash[0].id=this.flashId,swfobject.hasFlashPlayerVersion("10")?this.valid=!0:($(".sv_display",this.sv.$element).remove(),this.valid=!1)}if(asual===void 0)var asual={};asual.util===void 0&&(asual.util={}),asual.util.Browser=new function(){var e=navigator.userAgent.toLowerCase(),t=/webkit/.test(e),i=/opera/.test(e),s=/msie/.test(e)&&!/opera/.test(e),n=/mozilla/.test(e)&&!/(compatible|webkit)/.test(e),o=parseFloat(s?e.substr(e.indexOf("msie")+4):(e.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1]);this.toString=function(){return"[class Browser]"},this.getVersion=function(){return o},this.isMSIE=function(){return s},this.isSafari=function(){return t},this.isOpera=function(){return i},this.isMozilla=function(){return n}},asual.util.Events=new function(){var e="DOMContentLoaded",t="onstop",i=window,s=document,n=[],o=asual.util,r=o.Browser,l=r.isMSIE(),a=r.isSafari();this.toString=function(){return"[class Events]"},this.addListener=function(t,i,s){n.push({o:t,t:i,l:s}),(i!=e||!l&&!a)&&(t.addEventListener?t.addEventListener(i,s,!1):t.attachEvent&&t.attachEvent("on"+i,s))},this.removeListener=function(t,i,s){for(var o,r=0;o=n[r];r++)if(o.o==t&&o.t==i&&o.l==s){n.splice(r,1);break}(i!=e||!l&&!a)&&(t.removeEventListener?t.removeEventListener(i,s,!1):t.detachEvent&&t.detachEvent("on"+i,s))};var c=function(){for(var t,i=0;t=n[i];i++)t.t!=e&&o.Events.removeListener(t.o,t.t,t.l)},h=function(){function e(){s.detachEvent(t,e),c()}"interactive"==s.readyState&&(s.attachEvent(t,e),i.setTimeout(function(){s.detachEvent(t,e)},0))};(l||a)&&function(){try{(l&&s.body||!/loaded|complete/.test(s.readyState))&&s.documentElement.doScroll("left")}catch(t){return setTimeout(arguments.callee,0)}for(var t,i=0;t=n[i];i++)t.t==e&&t.l.call(null)}(),l&&i.attachEvent("onbeforeunload",h),this.addListener(i,"unload",c)},asual.util.Functions=new function(){this.toString=function(){return"[class Functions]"},this.bind=function(e,t){for(var i,s=2,n=[];i=arguments[s];s++)n.push(i);return function(){return e.apply(t,n)}}};var SWFAddressEvent=function(e){this.toString=function(){return"[object SWFAddressEvent]"},this.type=e,this.target=[SWFAddress][0],this.value=SWFAddress.getValue(),this.path=SWFAddress.getPath(),this.pathNames=SWFAddress.getPathNames(),this.parameters={};for(var t=SWFAddress.getParameterNames(),i=0,s=t.length;s>i;i++)this.parameters[t[i]]=SWFAddress.getParameter(t[i]);this.parameterNames=t};SWFAddressEvent.INIT="init",SWFAddressEvent.CHANGE="change",SWFAddressEvent.INTERNAL_CHANGE="internalChange",SWFAddressEvent.EXTERNAL_CHANGE="externalChange";var SWFAddress=new function(){var _getHash=function(){var e=_l.href.indexOf("#");return-1!=e?_ec(_dc(_l.href.substr(e+1))):""},_getWindow=function(){try{return top.document,top}catch(e){return window}},_strictCheck=function(e,t){return _opts.strict&&(e=t?"/"!=e.substr(0,1)?"/"+e:e:""==e?"/":e),e},_ieLocal=function(e,t){return _msie&&"file:"==_l.protocol?t?_value.replace(/\?/,"%3F"):_value.replace(/%253F/,"?"):e},_searchScript=function(e){if(e.childNodes)for(var t,i=0,s=e.childNodes.length;s>i;i++)if(e.childNodes[i].src&&(_url=e.childNodes[i].src+""),t=_searchScript(e.childNodes[i]))return t},_titleCheck=function(){_d.title!=_title&&-1!=_d.title.indexOf("#")&&(_d.title=_title)},_listen=function(){if(!_silent){var e=_getHash(),t=!(_value==e);_safari&&523>_version?_length!=_h.length&&(_length=_h.length,typeof _stack[_length-1]!=UNDEFINED&&(_value=_stack[_length-1]),_update.call(this,!1)):_msie&&t?7>_version?_l.reload():this.setValue(e):t&&(_value=e,_update.call(this,!1)),_msie&&_titleCheck.call(this)}},_bodyClick=function(e){if(_popup.length>0){var popup=window.open(_popup[0],_popup[1],eval(_popup[2]));typeof _popup[3]!=UNDEFINED&&eval(_popup[3])}_popup=[]},_swfChange=function(){for(var e,t,i=0,s=SWFAddress.getValue(),n="setSWFAddressValue";e=_ids[i];i++)if(t=document.getElementById(e))if(t.parentNode&&typeof t.parentNode.so!=UNDEFINED)t.parentNode.so.call(n,s);else{if(!t||typeof t[n]==UNDEFINED){var o=t.getElementsByTagName("object"),r=t.getElementsByTagName("embed");t=o[0]&&typeof o[0][n]!=UNDEFINED?o[0]:r[0]&&typeof r[0][n]!=UNDEFINED?r[0]:null}t&&t[n](s)}else(t=document[e])&&typeof t[n]!=UNDEFINED&&t[n](s)},_jsDispatch=function(e){this.dispatchEvent(new SWFAddressEvent(e)),e=e.substr(0,1).toUpperCase()+e.substr(1),typeof this["on"+e]==FUNCTION&&this["on"+e]()},_jsInit=function(){_util.Browser.isSafari()&&_d.body.addEventListener("click",_bodyClick),_jsDispatch.call(this,"init")},_jsChange=function(){_swfChange(),_jsDispatch.call(this,"change")},_update=function(e){_jsChange.call(this),e?_jsDispatch.call(this,"internalChange"):_jsDispatch.call(this,"externalChange"),_st(_functions.bind(_track,this),10)},_track=function(){var e=(_l.pathname+(/\/$/.test(_l.pathname)?"":"/")+this.getValue()).replace(/\/\//,"/").replace(/^\/$/,""),t=_t[_opts.tracker];typeof t==FUNCTION?t(e):typeof _t.pageTracker!=UNDEFINED&&typeof _t.pageTracker._trackPageview==FUNCTION?_t.pageTracker._trackPageview(e):typeof _t.urchinTracker==FUNCTION&&_t.urchinTracker(e)},_htmlWrite=function(){var e=_frame.contentWindow.document;e.open(),e.write("<html><head><title>"+_d.title+"</title><script>var "+ID+' = "'+_getHash()+'";</script></head></html>'),e.close()},_htmlLoad=function(){var e=_frame.contentWindow;e.location.href,_value=typeof e[ID]!=UNDEFINED?e[ID]:"",_value!=_getHash()&&(_update.call(SWFAddress,!1),_l.hash=_ieLocal(_value,TRUE))},_load=function(){if(!_loaded){if(_loaded=TRUE,_msie&&8>_version){var e=_d.getElementsByTagName("frameset")[0];_frame=_d.createElement((e?"":"i")+"frame"),e?(e.insertAdjacentElement("beforeEnd",_frame),e[e.cols?"cols":"rows"]+=",0",_frame.src="javascript:false",_frame.noResize=!0,_frame.frameBorder=_frame.frameSpacing=0):(_frame.src="javascript:false",_frame.style.display="none",_d.body.insertAdjacentElement("afterBegin",_frame)),_st(function(){_events.addListener(_frame,"load",_htmlLoad),typeof _frame.contentWindow[ID]==UNDEFINED&&_htmlWrite()},50)}else _safari&&(418>_version&&(_d.body.innerHTML+='<form id="'+ID+'" style="position:absolute;top:-9999px;" method="get"></form>',_form=_d.getElementById(ID)),typeof _l[ID]==UNDEFINED&&(_l[ID]={}),typeof _l[ID][_l.pathname]!=UNDEFINED&&(_stack=_l[ID][_l.pathname].split(",")));_st(_functions.bind(function(){_jsInit.call(this),_jsChange.call(this),_track.call(this)},this),1),_msie&&_version>=8?(_d.body.onhashchange=_functions.bind(_listen,this),_si(_functions.bind(_titleCheck,this),50)):_si(_functions.bind(_listen,this),50)}},ID="swfaddress",FUNCTION="function",UNDEFINED="undefined",TRUE=!0,FALSE=!1,_util=asual.util,_browser=_util.Browser,_events=_util.Events,_functions=_util.Functions,_version=_browser.getVersion(),_msie=_browser.isMSIE(),_mozilla=_browser.isMozilla(),_opera=_browser.isOpera(),_safari=_browser.isSafari(),_supported=FALSE,_t=_getWindow(),_d=_t.document,_h=_t.history,_l=_t.location,_si=setInterval,_st=setTimeout,_dc=decodeURI,_ec=encodeURI,_frame,_form,_url,_title=_d.title,_length=_h.length,_silent=FALSE,_loaded=FALSE,_justset=TRUE,_juststart=TRUE,_ref=this,_stack=[],_ids=[],_popup=[],_listeners={},_value=_getHash(),_opts={history:TRUE,strict:TRUE};if(_msie&&_d.documentMode&&_d.documentMode!=_version&&(_version=8!=_d.documentMode?7:8),_supported=_mozilla&&_version>=1||_msie&&_version>=6||_opera&&_version>=9.5||_safari&&_version>=312){_opera&&(history.navigationMode="compatible");for(var i=1;_length>i;i++)_stack.push("");_stack.push(_getHash()),_msie&&_l.hash!=_getHash()&&(_l.hash="#"+_ieLocal(_getHash(),TRUE)),_searchScript(document);var _qi=_url?_url.indexOf("?"):-1;if(-1!=_qi)for(var param,params=_url.substr(_qi+1).split("&"),i=0,p;p=params[i];i++)param=p.split("="),/^(history|strict)$/.test(param[0])&&(_opts[param[0]]=isNaN(param[1])?/^(true|yes)$/i.test(param[1]):0!=parseInt(param[1])),/^tracker$/.test(param[0])&&(_opts[param[0]]=param[1]);_msie&&_titleCheck.call(this),window==_t&&_events.addListener(document,"DOMContentLoaded",_functions.bind(_load,this)),_events.addListener(_t,"load",_functions.bind(_load,this))}else!_supported&&-1!=_l.href.indexOf("#")||_safari&&418>_version&&-1!=_l.href.indexOf("#")&&""!=_l.search?(_d.open(),_d.write('<html><head><meta http-equiv="refresh" content="0;url='+_l.href.substr(0,_l.href.indexOf("#"))+'" /></head></html>'),_d.close()):_track();this.toString=function(){return"[class SWFAddress]"},this.back=function(){_h.back()},this.forward=function(){_h.forward()},this.up=function(){var e=this.getPath();this.setValue(e.substr(0,e.lastIndexOf("/",e.length-2)+("/"==e.substr(e.length-1)?1:0)))},this.go=function(e){_h.go(e)},this.href=function(e,t){t=typeof t!=UNDEFINED?t:"_self","_self"==t?self.location.href=e:"_top"==t?_l.href=e:"_blank"==t?window.open(e):_t.frames[t].location.href=e},this.popup=function(url,name,options,handler){try{var popup=window.open(url,name,eval(options));typeof handler!=UNDEFINED&&eval(handler)}catch(ex){}_popup=arguments},this.getIds=function(){return _ids},this.getId=function(){return _ids[0]},this.setId=function(e){_ids[0]=e},this.addId=function(e){this.removeId(e),_ids.push(e)},this.removeId=function(e){for(var t=0;_ids.length>t;t++)if(e==_ids[t]){_ids.splice(t,1);break}},this.addEventListener=function(e,t){typeof _listeners[e]==UNDEFINED&&(_listeners[e]=[]),_listeners[e].push(t)},this.removeEventListener=function(e,t){if(typeof _listeners[e]!=UNDEFINED){for(var i,s=0;(i=_listeners[e][s])&&i!=t;s++);_listeners[e].splice(s,1)}},this.dispatchEvent=function(e){if(this.hasEventListener(e.type)){e.target=this;for(var t,i=0;t=_listeners[e.type][i];i++)t(e);return TRUE}return FALSE},this.hasEventListener=function(e){return typeof _listeners[e]!=UNDEFINED&&_listeners[e].length>0},this.getBaseURL=function(){var e=_l.href;return-1!=e.indexOf("#")&&(e=e.substr(0,e.indexOf("#"))),"/"==e.substr(e.length-1)&&(e=e.substr(0,e.length-1)),e},this.getStrict=function(){return _opts.strict},this.setStrict=function(e){_opts.strict=e},this.getHistory=function(){return _opts.history},this.setHistory=function(e){_opts.history=e},this.getTracker=function(){return _opts.tracker},this.setTracker=function(e){_opts.tracker=e},this.getTitle=function(){return _d.title},this.setTitle=function(e){return _supported?(typeof e!=UNDEFINED&&("null"==e&&(e=""),e=_dc(e),_st(function(){_title=_d.title=e,_juststart&&_frame&&_frame.contentWindow&&_frame.contentWindow.document&&(_frame.contentWindow.document.title=e,_juststart=FALSE),!_justset&&_mozilla&&_l.replace(-1!=_l.href.indexOf("#")?_l.href:_l.href+"#"),_justset=FALSE},10)),void 0):null},this.getStatus=function(){return _t.status},this.setStatus=function(e){if(!_supported)return null;if(typeof e!=UNDEFINED&&("null"==e&&(e=""),e=_dc(e),!_safari)){if(e=_strictCheck("null"!=e?e:"",TRUE),"/"==e&&(e=""),!/http(s)?:\/\//.test(e)){var t=_l.href.indexOf("#");e=(-1==t?_l.href:_l.href.substr(0,t))+"#"+e}_t.status=e}},this.resetStatus=function(){_t.status=""},this.getValue=function(){return _supported?_dc(_strictCheck(_ieLocal(_value,FALSE),FALSE)):null},this.setValue=function(e){if(!_supported)return null;if(typeof e!=UNDEFINED&&("null"==e&&(e=""),e=_ec(_dc(_strictCheck(e,TRUE))),"/"==e&&(e=""),_value!=e)){if(_justset=TRUE,_value=e,_silent=TRUE,_update.call(SWFAddress,!0),_stack[_h.length]=_value,_safari)if(_opts.history)if(_l[ID][_l.pathname]=""+_stack,_length=_h.length+1,418>_version)""==_l.search&&(_form.action="#"+_value,_form.submit());else if(523>_version||""==_value){var t=_d.createEvent("MouseEvents");t.initEvent("click",TRUE,TRUE);var i=_d.createElement("a");i.href="#"+_value,i.dispatchEvent(t)}else _l.hash="#"+_value;else _l.replace("#"+_value);else _value!=_getHash()&&(_opts.history?_l.hash="#"+_dc(_ieLocal(_value,TRUE)):_l.replace("#"+_dc(_value)));_msie&&8>_version&&_opts.history&&_st(_htmlWrite,50),_safari?_st(function(){_silent=FALSE},1):_silent=FALSE}},this.getPath=function(){var e=this.getValue();return-1!=e.indexOf("?")?e.split("?")[0]:-1!=e.indexOf("#")?e.split("#")[0]:e},this.getPathNames=function(){var e=this.getPath(),t=e.split("/");return("/"==e.substr(0,1)||0==e.length)&&t.splice(0,1),"/"==e.substr(e.length-1,1)&&t.splice(t.length-1,1),t},this.getQueryString=function(){var e=this.getValue(),t=e.indexOf("?");return-1!=t&&e.length>t?e.substr(t+1):void 0},this.getParameter=function(e){var t=this.getValue(),i=t.indexOf("?");if(-1!=i){t=t.substr(i+1);for(var s,n=t.split("&"),o=n.length,r=[];o--;)s=n[o].split("="),s[0]==e&&r.push(s[1]);if(0!=r.length)return 1!=r.length?r:r[0]}},this.getParameterNames=function(){var e=this.getValue(),t=e.indexOf("?"),i=[];if(-1!=t&&(e=e.substr(t+1),""!=e&&-1!=e.indexOf("=")))for(var s=e.split("&"),n=0;s.length>n;)i.push(s[n].split("=")[0]),n++;return i},this.onInit=null,this.onChange=null,this.onInternalChange=null,this.onExternalChange=null,function(){var e;if(typeof FlashObject!=UNDEFINED&&(SWFObject=FlashObject),typeof SWFObject!=UNDEFINED&&SWFObject.prototype&&SWFObject.prototype.write){var t=SWFObject.prototype.write;SWFObject.prototype.write=function(){e=arguments,8>this.getAttribute("version").major&&(this.addVariable("$swfaddress",SWFAddress.getValue()),("string"==typeof e[0]?document.getElementById(e[0]):e[0]).so=this);var i;return(i=t.apply(this,e))&&_ref.addId(this.getAttribute("id")),i}}if(typeof swfobject!=UNDEFINED){var i=swfobject.registerObject;swfobject.registerObject=function(){e=arguments,i.apply(this,e),_ref.addId(e[0])};var s=swfobject.createSWF;swfobject.createSWF=function(){e=arguments;var t=s.apply(this,e);return t&&_ref.addId(e[0].id),t};var n=swfobject.embedSWF;swfobject.embedSWF=function(){e=arguments,typeof e[8]==UNDEFINED&&(e[8]={}),typeof e[8].id==UNDEFINED&&(e[8].id=e[1]),n.apply(this,e),_ref.addId(e[8].id)}}if(typeof UFO!=UNDEFINED){var o=UFO.create;UFO.create=function(){e=arguments,o.apply(this,e),_ref.addId(e[0].id)}}if(typeof AC_FL_RunContent!=UNDEFINED){var r=AC_FL_RunContent;AC_FL_RunContent=function(){e=arguments,r.apply(this,e);for(var t=0,i=e.length;i>t;t++)"id"==e[t]&&_ref.addId(e[t+1])}}}()};/*!
  jQuery Cookie Plugin
  https://github.com/carhartl/jquery-cookie
 
  Copyright 2011, Klaus Hartl
  Dual licensed under the MIT or GPL Version 2 licenses.
  http://www.opensource.org/licenses/mit-license.php
  http://www.opensource.org/licenses/GPL-2.0
 */
(function(e){e.cookie=function(t,i,s){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(i))||null===i||void 0===i)){if(s=e.extend({},s),(null===i||void 0===i)&&(s.expires=-1),"number"==typeof s.expires){var n=s.expires,o=s.expires=new Date;o.setDate(o.getDate()+n)}return i+="",document.cookie=[encodeURIComponent(t),"=",s.raw?i:encodeURIComponent(i),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}s=i||{};for(var r,l=s.raw?function(e){return e}:decodeURIComponent,a=document.cookie.split("; "),c=0;r=a[c]&&a[c].split("=");c++)if(l(r[0])===t)return l(r[1]||"");return null}})(jQuery),/*!
 * iScroll v4.1.9 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
function(){var e=Math,t=function(e){return e>>0},i=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":"",s=/android/gi.test(navigator.appVersion),n=/iphone|ipad/gi.test(navigator.appVersion),o=/playbook/gi.test(navigator.appVersion),r=/hp-tablet/gi.test(navigator.appVersion),l="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,a="ontouchstart"in window&&!r,c=i+"Transform"in document.documentElement.style,h=n||o,u=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1)}}(),d=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),p="onorientationchange"in window?"orientationchange":"resize",f=a?"touchstart":"mousedown",m=a?"touchmove":"mousemove",v=a?"touchend":"mouseup",_=a?"touchcancel":"mouseup",b="Moz"==i?"DOMMouseScroll":"mousewheel",g="translate"+(l?"3d(":"("),y=l?",0)":")",S=function(e,t){var o,r=this,u=document;r.wrapper="object"==typeof e?e:u.getElementById(e),r.wrapper.style.overflow="hidden",r.scroller=r.wrapper.children[0],r.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:s,hideScrollbar:n,fadeScrollbar:n&&l,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(o in t)r.options[o]=t[o];r.x=r.options.x,r.y=r.options.y,r.options.useTransform=c?r.options.useTransform:!1,r.options.hScrollbar=r.options.hScroll&&r.options.hScrollbar,r.options.vScrollbar=r.options.vScroll&&r.options.vScrollbar,r.options.zoom=r.options.useTransform&&r.options.zoom,r.options.useTransition=h&&r.options.useTransition,r.options.zoom&&s&&(g="translate(",y=")"),r.scroller.style[i+"TransitionProperty"]=r.options.useTransform?"-"+i.toLowerCase()+"-transform":"top left",r.scroller.style[i+"TransitionDuration"]="0",r.scroller.style[i+"TransformOrigin"]="0 0",r.options.useTransition&&(r.scroller.style[i+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"),r.options.useTransform?r.scroller.style[i+"Transform"]=g+r.x+"px,"+r.y+"px"+y:r.scroller.style.cssText+=";position:absolute;top:"+r.y+"px;left:"+r.x+"px",r.options.useTransition&&(r.options.fixedScrollbar=!0),r.refresh(),r._bind(p,window),r._bind(f),a||(r._bind("mouseout",r.wrapper),"none"!=r.options.wheelAction&&r._bind(b)),r.options.checkDOMChanges&&(r.checkDOMTime=setInterval(function(){r._checkDOMChanges()},500))};S.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var t=this;switch(e.type){case f:if(!a&&0!==e.button)return;t._start(e);break;case m:t._move(e);break;case v:case _:t._end(e);break;case p:t._resize();break;case b:t._wheel(e);break;case"mouseout":t._mouseout(e);break;case"webkitTransitionEnd":t._transitionEnd(e)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(s){var n,o=this,r=document;return o[s+"Scrollbar"]?(o[s+"ScrollbarWrapper"]||(n=r.createElement("div"),o.options.scrollbarClass?n.className=o.options.scrollbarClass+s.toUpperCase():n.style.cssText="position:absolute;z-index:100;"+("h"==s?"height:7px;bottom:1px;left:2px;right:"+(o.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(o.hScrollbar?"7":"2")+"px;top:2px;right:1px"),n.style.cssText+=";pointer-events:none;-"+i+"-transition-property:opacity;-"+i+"-transition-duration:"+(o.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(o.options.hideScrollbar?"0":"1"),o.wrapper.appendChild(n),o[s+"ScrollbarWrapper"]=n,n=r.createElement("div"),o.options.scrollbarClass||(n.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+i+"-background-clip:padding-box;-"+i+"-box-sizing:border-box;"+("h"==s?"height:100%":"width:100%")+";-"+i+"-border-radius:3px;border-radius:3px"),n.style.cssText+=";pointer-events:none;-"+i+"-transition-property:-"+i+"-transform;-"+i+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+i+"-transition-duration:0;-"+i+"-transform:"+g+"0,0"+y,o.options.useTransition&&(n.style.cssText+=";-"+i+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),o[s+"ScrollbarWrapper"].appendChild(n),o[s+"ScrollbarIndicator"]=n),"h"==s?(o.hScrollbarSize=o.hScrollbarWrapper.clientWidth,o.hScrollbarIndicatorSize=e.max(t(o.hScrollbarSize*o.hScrollbarSize/o.scrollerW),8),o.hScrollbarIndicator.style.width=o.hScrollbarIndicatorSize+"px",o.hScrollbarMaxScroll=o.hScrollbarSize-o.hScrollbarIndicatorSize,o.hScrollbarProp=o.hScrollbarMaxScroll/o.maxScrollX):(o.vScrollbarSize=o.vScrollbarWrapper.clientHeight,o.vScrollbarIndicatorSize=e.max(t(o.vScrollbarSize*o.vScrollbarSize/o.scrollerH),8),o.vScrollbarIndicator.style.height=o.vScrollbarIndicatorSize+"px",o.vScrollbarMaxScroll=o.vScrollbarSize-o.vScrollbarIndicatorSize,o.vScrollbarProp=o.vScrollbarMaxScroll/o.maxScrollY),o._scrollbarPos(s,!0),void 0):(o[s+"ScrollbarWrapper"]&&(c&&(o[s+"ScrollbarIndicator"].style[i+"Transform"]=""),o[s+"ScrollbarWrapper"].parentNode.removeChild(o[s+"ScrollbarWrapper"]),o[s+"ScrollbarWrapper"]=null,o[s+"ScrollbarIndicator"]=null),void 0)},_resize:function(){var e=this;setTimeout(function(){e.refresh()},s?200:0)},_pos:function(e,s){e=this.hScroll?e:0,s=this.vScroll?s:0,this.options.useTransform?this.scroller.style[i+"Transform"]=g+e+"px,"+s+"px"+y+" scale("+this.scale+")":(e=t(e),s=t(s),this.scroller.style.left=e+"px",this.scroller.style.top=s+"px"),this.x=e,this.y=s,this._scrollbarPos("h"),this._scrollbarPos("v")},_scrollbarPos:function(e,s){var n,o=this,r="h"==e?o.x:o.y;o[e+"Scrollbar"]&&(r=o[e+"ScrollbarProp"]*r,0>r?(o.options.fixedScrollbar||(n=o[e+"ScrollbarIndicatorSize"]+t(3*r),8>n&&(n=8),o[e+"ScrollbarIndicator"].style["h"==e?"width":"height"]=n+"px"),r=0):r>o[e+"ScrollbarMaxScroll"]&&(o.options.fixedScrollbar?r=o[e+"ScrollbarMaxScroll"]:(n=o[e+"ScrollbarIndicatorSize"]-t(3*(r-o[e+"ScrollbarMaxScroll"])),8>n&&(n=8),o[e+"ScrollbarIndicator"].style["h"==e?"width":"height"]=n+"px",r=o[e+"ScrollbarMaxScroll"]+(o[e+"ScrollbarIndicatorSize"]-n))),o[e+"ScrollbarWrapper"].style[i+"TransitionDelay"]="0",o[e+"ScrollbarWrapper"].style.opacity=s&&o.options.hideScrollbar?"0":"1",o[e+"ScrollbarIndicator"].style[i+"Transform"]=g+("h"==e?r+"px,0":"0,"+r+"px")+y)},_start:function(t){var s,n,o,r,l,c=this,h=a?t.touches[0]:t;c.enabled&&(c.options.onBeforeScrollStart&&c.options.onBeforeScrollStart.call(c,t),(c.options.useTransition||c.options.zoom)&&c._transitionTime(0),c.moved=!1,c.animating=!1,c.zoomed=!1,c.distX=0,c.distY=0,c.absDistX=0,c.absDistY=0,c.dirX=0,c.dirY=0,c.options.zoom&&a&&t.touches.length>1&&(r=e.abs(t.touches[0].pageX-t.touches[1].pageX),l=e.abs(t.touches[0].pageY-t.touches[1].pageY),c.touchesDistStart=e.sqrt(r*r+l*l),c.originX=e.abs(t.touches[0].pageX+t.touches[1].pageX-2*c.wrapperOffsetLeft)/2-c.x,c.originY=e.abs(t.touches[0].pageY+t.touches[1].pageY-2*c.wrapperOffsetTop)/2-c.y,c.options.onZoomStart&&c.options.onZoomStart.call(c,t)),c.options.momentum&&(c.options.useTransform?(s=getComputedStyle(c.scroller,null)[i+"Transform"].replace(/[^0-9-.,]/g,"").split(","),n=1*s[4],o=1*s[5]):(n=1*getComputedStyle(c.scroller,null).left.replace(/[^0-9-]/g,""),o=1*getComputedStyle(c.scroller,null).top.replace(/[^0-9-]/g,"")),(n!=c.x||o!=c.y)&&(c.options.useTransition?c._unbind("webkitTransitionEnd"):d(c.aniTime),c.steps=[],c._pos(n,o))),c.absStartX=c.x,c.absStartY=c.y,c.startX=c.x,c.startY=c.y,c.pointX=h.pageX,c.pointY=h.pageY,c.startTime=t.timeStamp||Date.now(),c.options.onScrollStart&&c.options.onScrollStart.call(c,t),c._bind(m),c._bind(v),c._bind(_))},_move:function(t){var s,n,o,r=this,l=a?t.touches[0]:t,c=l.pageX-r.pointX,h=l.pageY-r.pointY,u=r.x+c,d=r.y+h,p=t.timeStamp||Date.now();return r.options.onBeforeScrollMove&&r.options.onBeforeScrollMove.call(r,t),r.options.zoom&&a&&t.touches.length>1?(s=e.abs(t.touches[0].pageX-t.touches[1].pageX),n=e.abs(t.touches[0].pageY-t.touches[1].pageY),r.touchesDist=e.sqrt(s*s+n*n),r.zoomed=!0,o=1/r.touchesDistStart*r.touchesDist*this.scale,r.options.zoomMin>o?o=.5*r.options.zoomMin*Math.pow(2,o/r.options.zoomMin):o>r.options.zoomMax&&(o=2*r.options.zoomMax*Math.pow(.5,r.options.zoomMax/o)),r.lastScale=o/this.scale,u=this.originX-this.originX*r.lastScale+this.x,d=this.originY-this.originY*r.lastScale+this.y,this.scroller.style[i+"Transform"]=g+u+"px,"+d+"px"+y+" scale("+o+")",r.options.onZoom&&r.options.onZoom.call(r,t),void 0):(r.pointX=l.pageX,r.pointY=l.pageY,(u>0||r.maxScrollX>u)&&(u=r.options.bounce?r.x+c/2:u>=0||r.maxScrollX>=0?0:r.maxScrollX),(d>r.minScrollY||r.maxScrollY>d)&&(d=r.options.bounce?r.y+h/2:d>=r.minScrollY||r.maxScrollY>=0?r.minScrollY:r.maxScrollY),r.distX+=c,r.distY+=h,r.absDistX=e.abs(r.distX),r.absDistY=e.abs(r.distY),6>r.absDistX&&6>r.absDistY||(r.options.lockDirection&&(r.absDistX>r.absDistY+5?(d=r.y,h=0):r.absDistY>r.absDistX+5&&(u=r.x,c=0)),r.moved=!0,r._pos(u,d),r.dirX=c>0?-1:0>c?1:0,r.dirY=h>0?-1:0>h?1:0,p-r.startTime>300&&(r.startTime=p,r.startX=r.x,r.startY=r.y),r.options.onScrollMove&&r.options.onScrollMove.call(r,t)),void 0)},_end:function(s){if(!a||0==s.touches.length){var n,o,r,l,c,h,u,d=this,p=a?s.changedTouches[0]:s,f={dist:0,time:0},b={dist:0,time:0},S=(s.timeStamp||Date.now())-d.startTime,w=d.x,$=d.y;if(d._unbind(m),d._unbind(v),d._unbind(_),d.options.onBeforeScrollEnd&&d.options.onBeforeScrollEnd.call(d,s),d.zoomed)return u=d.scale*d.lastScale,u=Math.max(d.options.zoomMin,u),u=Math.min(d.options.zoomMax,u),d.lastScale=u/d.scale,d.scale=u,d.x=d.originX-d.originX*d.lastScale+d.x,d.y=d.originY-d.originY*d.lastScale+d.y,d.scroller.style[i+"TransitionDuration"]="200ms",d.scroller.style[i+"Transform"]=g+d.x+"px,"+d.y+"px"+y+" scale("+d.scale+")",d.zoomed=!1,d.refresh(),d.options.onZoomEnd&&d.options.onZoomEnd.call(d,s),void 0;if(!d.moved)return a&&(d.doubleTapTimer&&d.options.zoom?(clearTimeout(d.doubleTapTimer),d.doubleTapTimer=null,d.options.onZoomStart&&d.options.onZoomStart.call(d,s),d.zoom(d.pointX,d.pointY,1==d.scale?d.options.doubleTapZoom:1),d.options.onZoomEnd&&setTimeout(function(){d.options.onZoomEnd.call(d,s)},200)):d.doubleTapTimer=setTimeout(function(){for(d.doubleTapTimer=null,n=p.target;1!=n.nodeType;)n=n.parentNode;"SELECT"!=n.tagName&&"INPUT"!=n.tagName&&"TEXTAREA"!=n.tagName&&(o=document.createEvent("MouseEvents"),o.initMouseEvent("click",!0,!0,s.view,1,p.screenX,p.screenY,p.clientX,p.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,0,null),o._fake=!0,n.dispatchEvent(o))},d.options.zoom?250:0)),d._resetPos(200),d.options.onTouchEnd&&d.options.onTouchEnd.call(d,s),void 0;if(300>S&&d.options.momentum&&(f=w?d._momentum(w-d.startX,S,-d.x,d.scrollerW-d.wrapperW+d.x,d.options.bounce?d.wrapperW:0):f,b=$?d._momentum($-d.startY,S,-d.y,0>d.maxScrollY?d.scrollerH-d.wrapperH+d.y-d.minScrollY:0,d.options.bounce?d.wrapperH:0):b,w=d.x+f.dist,$=d.y+b.dist,(d.x>0&&w>0||d.x<d.maxScrollX&&d.maxScrollX>w)&&(f={dist:0,time:0}),(d.y>d.minScrollY&&$>d.minScrollY||d.y<d.maxScrollY&&d.maxScrollY>$)&&(b={dist:0,time:0})),f.dist||b.dist)return c=e.max(e.max(f.time,b.time),10),d.options.snap&&(r=w-d.absStartX,l=$-d.absStartY,e.abs(r)<d.options.snapThreshold&&e.abs(l)<d.options.snapThreshold?d.scrollTo(d.absStartX,d.absStartY,200):(h=d._snap(w,$),w=h.x,$=h.y,c=e.max(h.time,c))),d.scrollTo(t(w),t($),c),d.options.onTouchEnd&&d.options.onTouchEnd.call(d,s),void 0;if(d.options.snap)return r=w-d.absStartX,l=$-d.absStartY,e.abs(r)<d.options.snapThreshold&&e.abs(l)<d.options.snapThreshold?d.scrollTo(d.absStartX,d.absStartY,200):(h=d._snap(d.x,d.y),(h.x!=d.x||h.y!=d.y)&&d.scrollTo(h.x,h.y,h.time)),d.options.onTouchEnd&&d.options.onTouchEnd.call(d,s),void 0;d._resetPos(200),d.options.onTouchEnd&&d.options.onTouchEnd.call(d,s)}},_resetPos:function(e){var t=this,s=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,n=t.y>=t.minScrollY||t.maxScrollY>0?t.minScrollY:t.y<t.maxScrollY?t.maxScrollY:t.y;return s==t.x&&n==t.y?(t.moved&&(t.moved=!1,t.options.onScrollEnd&&t.options.onScrollEnd.call(t)),t.hScrollbar&&t.options.hideScrollbar&&("webkit"==i&&(t.hScrollbarWrapper.style[i+"TransitionDelay"]="300ms"),t.hScrollbarWrapper.style.opacity="0"),t.vScrollbar&&t.options.hideScrollbar&&("webkit"==i&&(t.vScrollbarWrapper.style[i+"TransitionDelay"]="300ms"),t.vScrollbarWrapper.style.opacity="0"),void 0):(t.scrollTo(s,n,e||0),void 0)},_wheel:function(e){var t,i,s,n,o,r=this;if("wheelDeltaX"in e)t=e.wheelDeltaX/12,i=e.wheelDeltaY/12;else if("wheelDelta"in e)t=i=e.wheelDelta/12;else{if(!("detail"in e))return;t=i=3*-e.detail}return"zoom"==r.options.wheelAction?(o=r.scale*Math.pow(2,1/3*(i?i/Math.abs(i):0)),r.options.zoomMin>o&&(o=r.options.zoomMin),o>r.options.zoomMax&&(o=r.options.zoomMax),o!=r.scale&&(!r.wheelZoomCount&&r.options.onZoomStart&&r.options.onZoomStart.call(r,e),r.wheelZoomCount++,r.zoom(e.pageX,e.pageY,o,400),setTimeout(function(){r.wheelZoomCount--,!r.wheelZoomCount&&r.options.onZoomEnd&&r.options.onZoomEnd.call(r,e)},400)),void 0):(s=r.x+t,n=r.y+i,s>0?s=0:r.maxScrollX>s&&(s=r.maxScrollX),n>r.minScrollY?n=r.minScrollY:r.maxScrollY>n&&(n=r.maxScrollY),r.scrollTo(s,n,0),void 0)},_mouseout:function(e){var t=e.relatedTarget;if(!t)return this._end(e),void 0;for(;t=t.parentNode;)if(t==this.wrapper)return;this._end(e)},_transitionEnd:function(e){var t=this;e.target==t.scroller&&(t._unbind("webkitTransitionEnd"),t._startAni())},_startAni:function(){var t,i,s,n=this,o=n.x,r=n.y,l=Date.now();if(!n.animating){if(!n.steps.length)return n._resetPos(400),void 0;if(t=n.steps.shift(),t.x==o&&t.y==r&&(t.time=0),n.animating=!0,n.moved=!0,n.options.useTransition)return n._transitionTime(t.time),n._pos(t.x,t.y),n.animating=!1,t.time?n._bind("webkitTransitionEnd"):n._resetPos(0),void 0;s=function(){var a,c,h=Date.now();return h>=l+t.time?(n._pos(t.x,t.y),n.animating=!1,n.options.onAnimationEnd&&n.options.onAnimationEnd.call(n),n._startAni(),void 0):(h=(h-l)/t.time-1,i=e.sqrt(1-h*h),a=(t.x-o)*i+o,c=(t.y-r)*i+r,n._pos(a,c),n.animating&&(n.aniTime=u(s)),void 0)},s()}},_transitionTime:function(e){e+="ms",this.scroller.style[i+"TransitionDuration"]=e,this.hScrollbar&&(this.hScrollbarIndicator.style[i+"TransitionDuration"]=e),this.vScrollbar&&(this.vScrollbarIndicator.style[i+"TransitionDuration"]=e)},_momentum:function(i,s,n,o,r){var l=6e-4,a=e.abs(i)/s,c=a*a/(2*l),h=0,u=0;return i>0&&c>n?(u=r/(6/(c/a*l)),n+=u,a=a*n/c,c=n):0>i&&c>o&&(u=r/(6/(c/a*l)),o+=u,a=a*o/c,c=o),c*=0>i?-1:1,h=a/l,{dist:c,time:t(h)}},_offset:function(e){for(var t=-e.offsetLeft,i=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,i-=e.offsetTop;return e!=this.wrapper&&(t*=this.scale,i*=this.scale),{left:t,top:i}},_snap:function(i,s){var n,o,r,l,a,c,h=this;for(r=h.pagesX.length-1,n=0,o=h.pagesX.length;o>n;n++)if(i>=h.pagesX[n]){r=n;break}for(r==h.currPageX&&r>0&&0>h.dirX&&r--,i=h.pagesX[r],a=e.abs(i-h.pagesX[h.currPageX]),a=a?500*(e.abs(h.x-i)/a):0,h.currPageX=r,r=h.pagesY.length-1,n=0;r>n;n++)if(s>=h.pagesY[n]){r=n;break}return r==h.currPageY&&r>0&&0>h.dirY&&r--,s=h.pagesY[r],c=e.abs(s-h.pagesY[h.currPageY]),c=c?500*(e.abs(h.y-s)/c):0,h.currPageY=r,l=t(e.max(a,c))||200,{x:i,y:s,time:l}},_bind:function(e,t,i){(t||this.scroller).addEventListener(e,this,!!i)},_unbind:function(e,t,i){(t||this.scroller).removeEventListener(e,this,!!i)},destroy:function(){var e=this;e.scroller.style[i+"Transform"]="",e.hScrollbar=!1,e.vScrollbar=!1,e._scrollbar("h"),e._scrollbar("v"),e._unbind(p,window),e._unbind(f),e._unbind(m),e._unbind(v),e._unbind(_),e.options.hasTouch||(e._unbind("mouseout",e.wrapper),e._unbind(b)),e.options.useTransition&&e._unbind("webkitTransitionEnd"),e.options.checkDOMChanges&&clearInterval(e.checkDOMTime),e.options.onDestroy&&e.options.onDestroy.call(e)},refresh:function(){var e,s,n,o,r=this,l=0,a=0;if(r.scale<r.options.zoomMin&&(r.scale=r.options.zoomMin),r.wrapperW=r.wrapper.clientWidth||1,r.wrapperH=r.wrapper.clientHeight||1,r.minScrollY=-r.options.topOffset||0,r.scrollerW=t(r.scroller.offsetWidth*r.scale),r.scrollerH=t((r.scroller.offsetHeight+r.minScrollY)*r.scale),r.maxScrollX=r.wrapperW-r.scrollerW,r.maxScrollY=r.wrapperH-r.scrollerH+r.minScrollY,r.dirX=0,r.dirY=0,r.options.onRefresh&&r.options.onRefresh.call(r),r.hScroll=r.options.hScroll&&0>r.maxScrollX,r.vScroll=r.options.vScroll&&(!r.options.bounceLock&&!r.hScroll||r.scrollerH>r.wrapperH),r.hScrollbar=r.hScroll&&r.options.hScrollbar,r.vScrollbar=r.vScroll&&r.options.vScrollbar&&r.scrollerH>r.wrapperH,e=r._offset(r.wrapper),r.wrapperOffsetLeft=-e.left,r.wrapperOffsetTop=-e.top,"string"==typeof r.options.snap)for(r.pagesX=[],r.pagesY=[],o=r.scroller.querySelectorAll(r.options.snap),s=0,n=o.length;n>s;s++)l=r._offset(o[s]),l.left+=r.wrapperOffsetLeft,l.top+=r.wrapperOffsetTop,r.pagesX[s]=l.left<r.maxScrollX?r.maxScrollX:l.left*r.scale,r.pagesY[s]=l.top<r.maxScrollY?r.maxScrollY:l.top*r.scale;else if(r.options.snap){for(r.pagesX=[];l>=r.maxScrollX;)r.pagesX[a]=l,l-=r.wrapperW,a++;for(r.maxScrollX%r.wrapperW&&(r.pagesX[r.pagesX.length]=r.maxScrollX-r.pagesX[r.pagesX.length-1]+r.pagesX[r.pagesX.length-1]),l=0,a=0,r.pagesY=[];l>=r.maxScrollY;)r.pagesY[a]=l,l-=r.wrapperH,a++;r.maxScrollY%r.wrapperH&&(r.pagesY[r.pagesY.length]=r.maxScrollY-r.pagesY[r.pagesY.length-1]+r.pagesY[r.pagesY.length-1])}r._scrollbar("h"),r._scrollbar("v"),r.zoomed||(r.scroller.style[i+"TransitionDuration"]="0",r._resetPos(200))},scrollTo:function(e,t,i,s){var n,o,r=this,l=e;for(r.stop(),l.length||(l=[{x:e,y:t,time:i,relative:s}]),n=0,o=l.length;o>n;n++)l[n].relative&&(l[n].x=r.x-l[n].x,l[n].y=r.y-l[n].y),r.steps.push({x:l[n].x,y:l[n].y,time:l[n].time||0});r._startAni()},scrollToElement:function(t,i){var s,n=this;t=t.nodeType?t:n.scroller.querySelector(t),t&&(s=n._offset(t),s.left+=n.wrapperOffsetLeft,s.top+=n.wrapperOffsetTop,s.left=s.left>0?0:s.left<n.maxScrollX?n.maxScrollX:s.left,s.top=s.top>n.minScrollY?n.minScrollY:s.top<n.maxScrollY?n.maxScrollY:s.top,i=void 0===i?e.max(2*e.abs(s.left),2*e.abs(s.top)):i,n.scrollTo(s.left,s.top,i))},scrollToPage:function(e,t,i){var s,n,o=this;i=void 0===i?400:i,o.options.onScrollStart&&o.options.onScrollStart.call(o),o.options.snap?(e="next"==e?o.currPageX+1:"prev"==e?o.currPageX-1:e,t="next"==t?o.currPageY+1:"prev"==t?o.currPageY-1:t,e=0>e?0:e>o.pagesX.length-1?o.pagesX.length-1:e,t=0>t?0:t>o.pagesY.length-1?o.pagesY.length-1:t,o.currPageX=e,o.currPageY=t,s=o.pagesX[e],n=o.pagesY[t]):(s=-o.wrapperW*e,n=-o.wrapperH*t,o.maxScrollX>s&&(s=o.maxScrollX),o.maxScrollY>n&&(n=o.maxScrollY)),o.scrollTo(s,n,i)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(m),this._unbind(v),this._unbind(_)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind("webkitTransitionEnd"):d(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(e,t,s,n){var o=this,r=s/o.scale;o.options.useTransform&&(o.zoomed=!0,n=void 0===n?200:n,e=e-o.wrapperOffsetLeft-o.x,t=t-o.wrapperOffsetTop-o.y,o.x=e-e*r+o.x,o.y=t-t*r+o.y,o.scale=s,o.refresh(),o.x=o.x>0?0:o.x<o.maxScrollX?o.maxScrollX:o.x,o.y=o.y>o.minScrollY?o.minScrollY:o.y<o.maxScrollY?o.maxScrollY:o.y,o.scroller.style[i+"TransitionDuration"]=n+"ms",o.scroller.style[i+"Transform"]=g+o.x+"px,"+o.y+"px"+y+" scale("+s+")",o.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},"undefined"!=typeof exports?exports.iScroll=S:window.iScroll=S}(),function(){var e,t,i;e=jQuery,i=function(){function e(){this.fileLoadingImage="images/loading.gif",this.fileCloseImage="images/close.png",this.resizeDuration=700,this.fadeDuration=500,this.labelImage="Image",this.labelOf="of"}return e}(),t=function(){function t(e){this.options=e,this.album=[],this.currentImageIndex=void 0,this.init()}return t.prototype.init=function(){return this.enable(),this.build()},t.prototype.enable=function(){var t=this;return e("body").on("click","a[rel^=lightbox], area[rel^=lightbox]",function(i){return t.start(e(i.currentTarget)),!1})},t.prototype.build=function(){var t,i=this;e("<div>",{id:"lightboxOverlay"}).after(e("<div/>",{id:"lightbox"}).append(e("<div/>",{"class":"lb-outerContainer"}).append(e("<div/>",{"class":"lb-container"}).append(e("<img/>",{"class":"lb-image"}),e("<div/>",{"class":"lb-nav"}).append(e("<a/>",{"class":"lb-prev"}),e("<a/>",{"class":"lb-next"})),e("<div/>",{"class":"lb-loader"}).append(e("<a/>",{"class":"lb-cancel"}).append(e("<img/>",{src:this.options.fileLoadingImage}))))),e("<div/>",{"class":"lb-dataContainer"}).append(e("<div/>",{"class":"lb-data"}).append(e("<div/>",{"class":"lb-details"}).append(e("<span/>",{"class":"lb-caption"}),e("<span/>",{"class":"lb-number"})),e("<div/>",{"class":"lb-closeContainer"}).append(e("<a/>",{"class":"lb-close"}).append(e("<img/>",{src:this.options.fileCloseImage}))))))).appendTo(e("body")),e("#lightboxOverlay").hide().on("click",function(){return i.end(),!1}),t=e("#lightbox"),t.hide().on("click",function(t){return"lightbox"===e(t.target).attr("id")&&i.end(),!1}),t.find(".lb-outerContainer").on("click",function(t){return"lightbox"===e(t.target).attr("id")&&i.end(),!1}),t.find(".lb-prev").on("click",function(){return i.changeImage(i.currentImageIndex-1),!1}),t.find(".lb-next").on("click",function(){return i.changeImage(i.currentImageIndex+1),!1}),t.find(".lb-loader, .lb-close").on("click",function(){return i.end(),!1})},t.prototype.start=function(t){var i,s,n,o,r,l,a,c,h;if(e(window).on("resize",this.sizeOverlay),e("select, object, embed").css({visibility:"hidden"}),e("#lightboxOverlay").width(e(document).width()).height(e(document).height()).fadeIn(this.options.fadeDuration),this.album=[],r=0,"lightbox"===t.attr("rel"))this.album.push({link:t.attr("href"),title:t.attr("title")});else for(h=e(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]'),o=0,c=h.length;c>o;o++)n=h[o],this.album.push({link:e(n).attr("href"),title:e(n).attr("title")}),e(n).attr("href")===t.attr("href")&&(r=o);s=e(window),a=s.scrollTop()+s.height()/10,l=s.scrollLeft(),i=e("#lightbox"),i.css({top:a+"px",left:l+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(r)},t.prototype.changeImage=function(t){var i,s,n,o=this;this.disableKeyboardNav(),s=e("#lightbox"),i=s.find(".lb-image"),this.sizeOverlay(),e("#lightboxOverlay").fadeIn(this.options.fadeDuration),e(".loader").fadeIn("slow"),s.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),s.find(".lb-outerContainer").addClass("animating"),n=new Image,n.onload=function(){return i.attr("src",o.album[t].link),i.width=n.width,i.height=n.height,o.sizeContainer(n.width,n.height)},n.src=this.album[t].link,this.currentImageIndex=t},t.prototype.sizeOverlay=function(){return e("#lightboxOverlay").width(e(document).width()).height(e(document).height())},t.prototype.sizeContainer=function(t,i){var s,n,o,r,l,a,c,h,u,d,p,f=this;n=e("#lightbox"),o=n.find(".lb-outerContainer"),p=o.outerWidth(),d=o.outerHeight(),s=n.find(".lb-container"),c=parseInt(s.css("padding-top"),10),a=parseInt(s.css("padding-right"),10),r=parseInt(s.css("padding-bottom"),10),l=parseInt(s.css("padding-left"),10),u=t+l+a,h=i+c+r,u!==p&&h!==d?o.animate({width:u,height:h},this.options.resizeDuration,"swing"):u!==p?o.animate({width:u},this.options.resizeDuration,"swing"):h!==d&&o.animate({height:h},this.options.resizeDuration,"swing"),setTimeout(function(){n.find(".lb-dataContainer").width(u),n.find(".lb-prevLink").height(h),n.find(".lb-nextLink").height(h),f.showImage()},this.options.resizeDuration)},t.prototype.showImage=function(){var t;t=e("#lightbox"),t.find(".lb-loader").hide(),t.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},t.prototype.updateNav=function(){var t;t=e("#lightbox"),t.find(".lb-nav").show(),this.currentImageIndex>0&&t.find(".lb-prev").show(),this.currentImageIndex<this.album.length-1&&t.find(".lb-next").show()},t.prototype.updateDetails=function(){var t,i=this;t=e("#lightbox"),this.album[this.currentImageIndex].title!==void 0&&""!==this.album[this.currentImageIndex].title&&t.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast"),this.album.length>1?t.find(".lb-number").html(this.options.labelImage+" "+(this.currentImageIndex+1)+" "+this.options.labelOf+"  "+this.album.length).fadeIn("fast"):t.find(".lb-number").hide(),t.find(".lb-outerContainer").removeClass("animating"),t.find(".lb-dataContainer").fadeIn(this.resizeDuration,function(){return i.sizeOverlay()})},t.prototype.preloadNeighboringImages=function(){var e,t;this.album.length>this.currentImageIndex+1&&(e=new Image,e.src=this.album[this.currentImageIndex+1].link),this.currentImageIndex>0&&(t=new Image,t.src=this.album[this.currentImageIndex-1].link)},t.prototype.enableKeyboardNav=function(){e(document).on("keyup.keyboard",e.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){e(document).off(".keyboard")},t.prototype.keyboardAction=function(e){var t,i,s,n,o;t=27,i=37,s=39,o=e.keyCode,n=String.fromCharCode(o).toLowerCase(),o===t||n.match(/x|o|c/)?this.end():"p"===n||o===i?0!==this.currentImageIndex&&this.changeImage(this.currentImageIndex-1):("n"===n||o===s)&&this.currentImageIndex!==this.album.length-1&&this.changeImage(this.currentImageIndex+1)},t.prototype.end=function(){return this.disableKeyboardNav(),e(window).off("resize",this.sizeOverlay),e("#lightbox").fadeOut(this.options.fadeDuration),e("#lightboxOverlay").fadeOut(this.options.fadeDuration),e("select, object, embed").css({visibility:"visible"})},t}(),e(function(){var e,s;return s=new i,e=new t(s)})}.call(this);var SimpleVideoEventHandler=function(){function e(e,t){s[e]=t}function t(e,t,i){s[e].flashEvent(t,i)}function i(e){s[e.data.id].htmlEvent(e)}var s=[];return{addPlayer:e,flashEvent:t,htmlEvent:i}}();SimpleVideo.prototype.bindListeners=function(){var e=this;this.$element.hover(function(){e.showControls()},function(){e.setHide(800)}),this.$element.mousemove(function(){e.controlsActive||(e.controlsActive=!0,e.$controls.removeClass("inactive").addClass("active"),e.setHide(2500))}),this.$display.click(function(){e.isPlaying?e.pause():e.play()}),this.$controls.hover(function(){e.setHide(8e3)},function(){e.setHide(2500)}),this.$restartButton.click(function(){e.restart()}),this.$playButton.click(function(){e.play()}),this.$pauseButton.click(function(){e.pause()}),this.$muteButton.click(function(){e.mute()}),this.$unmuteButton.click(function(){e.unmute()}),this.$volumeMaxButton.click(function(){e.maxVolume()}),this.$volumeSlider.click(function(t){e.vSliderClick(t)}),this.$scrubber.click(function(t){e.scrubberClick(t)}),this.$fullscreenButton.click(function(){e.fullscreen()}),this.$normalscreenButton.click(function(){e.normalscreen()}),this.controller.bindListeners()},SimpleVideo.prototype.breakListeners=function(){this.$element.unbind(),this.$display.unbind(),this.$controls.unbind(),this.$restartButton.unbind(),this.$playButton.unbind(),this.$pauseButton.unbind(),this.$muteButton.unbind(),this.$unmuteButton.unbind(),this.$volumeMaxButton.unbind(),this.$volumeSlider.unbind(),this.$fullscreenButton.unbind(),this.$normalscreenButton.unbind(),this.controller.breakListeners()},SimpleVideo.prototype.init=function(e){this.initializing||(this.initializing=!0,this.controller.init(e))},SimpleVideo.prototype.setState=function(e,t){if(this.solution&&!this.objConfig.nativeControls)switch(this.firstLoad||"volume"==e||(e="nomedia"),e){case"nomedia":this.$buffering.removeClass("active").addClass("inactive"),this.$poster.removeClass("inactive"),this.state=e;break;case"buffering":this.$poster.addClass("inactive"),this.$buffering.removeClass("inactive").addClass("active"),this.state=e;break;case"playing":this.isPlaying=!0,this.$buffering.removeClass("active").addClass("inactive"),this.$pauseButton.removeClass("inactive").addClass("active"),this.$playButton.removeClass("active").addClass("inactive"),this.state=e;break;case"paused":this.isPlaying=!1,this.$pauseButton.removeClass("active").addClass("inactive"),this.$playButton.removeClass("inactive").addClass("active"),this.state=e;break;case"volume":this.volume=t.volume,0==this.volume?(this.$unmuteButton.removeClass("inactive").addClass("active"),this.$muteButton.removeClass("active").addClass("inactive")):(this.$unmuteButton.removeClass("active").addClass("inactive"),this.$muteButton.removeClass("inactive").addClass("active")),this.$volumeMarker[0].style.width=parseInt(100*this.volume)+"%";break;case"load_progress":this.$loadProgress[0].style.width=parseInt(100*t.percent)+"%";break;case"play_progress":"buffering"==this.state&&this.$buffering.removeClass("active").addClass("inactive"),this.$playProgress[0].style.width=parseInt(100*t.percent)+"%";break;case"fullscreen":this.breakListeners(),this.bindListeners(),this.$element.addClass("fullscreen"),this.$fullscreenButton.removeClass("active").addClass("inactive"),this.$normalscreenButton.removeClass("inactive").addClass("active"),this.objConfig.onFullscreen&&this.objConfig.onFullscreen(),this.isPlaying&&this.play();break;case"normalscreen":this.breakListeners(),this.bindListeners(),this.$element.removeClass("fullscreen"),this.$fullscreenButton.removeClass("inactive").addClass("active"),this.$normalscreenButton.removeClass("active").addClass("inactive"),this.objConfig.onNormalscreen&&this.objConfig.onNormalscreen(),this.isPlaying&&this.play()}},SimpleVideo.prototype.showControls=function(){this.solution&&"nomedia"!=this.state&&(this.isOver=!0,this.controlsActive=!0,this.$controls.removeClass("inactive").addClass("active"),this.isVideo&&this.setHide(2500))},SimpleVideo.prototype.hideControls=function(){this.solution&&this.isVideo&&(this.isOver=!1,this.controlsActive=!1,this.$controls.removeClass("active").addClass("inactive"))},SimpleVideo.prototype.setHide=function(e){if(this.solution&&this.isVideo){clearTimeout(this.hideTimeout);var t=this;this.hideTimeout=setTimeout(function(){t.hideControls()},e)}},SimpleVideo.prototype.setFile=function(e,t){this.solution&&(t===void 0&&(t=!1),this.firstLoad=!0,this.controller.setFile(e),this.isVideo=!t,this.objConfig.nativeControls?t?this.controller.setPoster(this.audioPoster):this.controller.setPoster(this.audioPoster):(t?(this.$audioOnly.removeClass("inactive"),this.showControls()):(this.$audioOnly.addClass("inactive"),this.hideControls()),this.$loadProgress[0].style.width=this.$playProgress[0].style.width=0))},SimpleVideo.prototype.setScrub=function(e){this.canScrub=e},SimpleVideo.prototype.play=function(){this.solution&&this.controller.play()},SimpleVideo.prototype.pause=function(){this.solution&&this.controller.pause()},SimpleVideo.prototype.restart=function(){this.solution&&(this.setHide(2500),this.controller.seek(0))},SimpleVideo.prototype.clear=function(){this.solution&&this.controller.clear()},SimpleVideo.prototype.setRepeat=function(e){this.solution&&this.controller.setRepeat(e)},SimpleVideo.prototype.mute=function(){this.solution&&this.controller.setMute(!0)},SimpleVideo.prototype.unmute=function(){this.solution&&this.controller.setMute(!1)},SimpleVideo.prototype.maxVolume=function(){this.solution&&this.controller.setVolume(1)},SimpleVideo.prototype.vSliderClick=function(e){this.solution&&this.controller.setVolume((e.pageX-this.$volumeSlider.offset().left)/this.$volumeSlider.width())
},SimpleVideo.prototype.scrubberClick=function(e){this.solution&&this.canScrub&&this.controller.seek((e.pageX-this.$scrubber.offset().left)/this.$scrubber.width())},SimpleVideo.prototype.fullscreen=function(){if(this.solution&&"nomedia"!=this.state){if(fullScreenApi.supportsFullScreen&&this.objConfig.trueFullscreen)fullScreenApi.requestFullScreen(this.$element[0]);else{this.$swapDiv=$("<div>Fullscreen</div>"),this.$element.replaceWith(this.$swapDiv),$("body").append(this.$element);var e=this;$(document).bind("keyup.sv",function(t){27==t.keyCode&&e.normalscreen()})}this.controller.setFullscreen(!0)}},SimpleVideo.prototype.normalscreen=function(){fullScreenApi.supportsFullScreen&&this.objConfig.trueFullscreen?fullScreenApi.cancelFullScreen():(this.$swapDiv.replaceWith(this.$element),this.$swapDiv=null,$(document).unbind("keyup.sv")),this.controller.setFullscreen(!1)},HTMLController.prototype.bindListeners=function(){var e={id:this.sv.$element[0].id};this.$video.bind("play",e,SimpleVideoEventHandler.htmlEvent),this.$video.bind("pause",e,SimpleVideoEventHandler.htmlEvent),this.$video.bind("ended",e,SimpleVideoEventHandler.htmlEvent),this.$video.bind("volumechange",e,SimpleVideoEventHandler.htmlEvent),this.$video.bind("progress",e,SimpleVideoEventHandler.htmlEvent),this.$video.bind("timeupdate",e,SimpleVideoEventHandler.htmlEvent),this.$video.bind("abort",e,SimpleVideoEventHandler.htmlEvent),this.$video.bind("error",e,SimpleVideoEventHandler.htmlEvent),this.$video.bind("loadstart",e,SimpleVideoEventHandler.htmlEvent),this.$video.bind("stalled",e,SimpleVideoEventHandler.htmlEvent),this.$video.bind("playing",e,SimpleVideoEventHandler.htmlEvent),this.$video.bind("waiting",e,SimpleVideoEventHandler.htmlEvent)},HTMLController.prototype.breakListeners=function(){this.$video.unbind()},HTMLController.prototype.init=function(e){e()},HTMLController.prototype.htmlEvent=function(e){switch("timeupdate"!=e.type,e.type){case"abort":this.sv.setState("nomedia");break;case"stalled":break;case"waiting":case"loadstart":this.sv.setState("buffering");break;case"playing":case"play":this.sv.setState("playing");break;case"pause":this.sv.setState("paused");break;case"volumechange":this.sv.setState("volume",{volume:this.$video[0].volume});break;case"ended":this.loop?this.play():(this.seek(0),this.pause());break;case"progress":var t=0;this.$video[0].buffered&&this.$video[0].buffered.length>0&&this.$video[0].buffered.end&&this.$video[0].duration?t=this.$video[0].buffered.end(0)/this.$video[0].duration:void 0!=this.$video[0].bytesTotal&&this.$video[0].bytesTotal>0&&void 0!=this.$video[0].bufferedBytes&&(t=this.$video[0].bufferedBytes/this.$video[0].bytesTotal),this.sv.setState("load_progress",{percent:t});break;case"timeupdate":this.sv.setState("play_progress",{percent:this.$video[0].currentTime/this.$video[0].duration})}},HTMLController.prototype.setFile=function(e){for(var t=0,i=e.length;i>t;t++)if(""!=this.$video[0].canPlayType(e[t].type)){this.$video[0].src=e[t].src;break}this.$video[0].controls=this.sv.objConfig.nativeControls},HTMLController.prototype.setPoster=function(e){this.$video.attr("poster",e)},HTMLController.prototype.clear=function(){this.$video[0].pause(),this.$video[0].src="",this.sv.setState("nomedia")},HTMLController.prototype.play=function(){this.$video[0].autoplay=!0,this.$video[0].play()},HTMLController.prototype.setRepeat=function(e){this.loop=e},HTMLController.prototype.pause=function(){this.$video[0].autoplay=!1,this.$video[0].pause()},HTMLController.prototype.seek=function(e){this.$video[0].currentTime=e*this.$video[0].duration},HTMLController.prototype.setMute=function(e){this.$video[0].volume=e?0:this.htmlVolume},HTMLController.prototype.setVolume=function(e){this.$video[0].volume=this.htmlVolume=e},HTMLController.prototype.setFullscreen=function(e){e?(this.$video[0].controls=!1,this.$video.addClass("fullscreen"),this.sv.setState("fullscreen")):(this.$video.removeClass("fullscreen"),this.sv.setState("normalscreen"))},FlashController.prototype.bindListeners=function(){},FlashController.prototype.breakListeners=function(){},FlashController.prototype.init=function(e){if(!this.valid)return e(),void 0;var t="/js/simplevideo/SimpleVideo.swf",i={playerId:this.sv.$element[0].id},s={allowScriptAccess:"always",menu:"false",wmode:"opaque"},n={id:this.flashId,name:this.flashId};this.initCallback=e,swfobject.embedSWF(t,this.flashId,"100%","100%","10","/swfobject/expressInstall.swf",i,s,n)},FlashController.prototype.flashEvent=function(e,t){switch(e){case"TRACE":break;case"LOADING_VIDEO":case"BUFFER_EMPTY":this.sv.setState("buffering");break;case"FLASH_LOADED":this.flashLoaded=!0,this.initCallback&&(this.initCallback(),this.initCallback=null);break;case"BUFFER_FULL":case"PLAYING":this.sv.setState("playing");break;case"PAUSED":this.sv.setState("paused");break;case"LOAD_PROGRESS":this.sv.setState("load_progress",t);break;case"PLAYHEAD_CHANGE":this.sv.setState("play_progress",t)}},FlashController.prototype.setFile=function(e){this.$flash[0].callFunc===void 0&&(this.$flash=$(swfobject.getObjectById(this.flashId)));for(var t=0,i=e.length;i>t;t++)if(e[t].src.indexOf("mp4")>-1){this.$flash[0].callFunc("load",{url:e[t].src});break}},FlashController.prototype.setPoster=function(){},FlashController.prototype.clear=function(){this.$flash[0].callFunc("stopVideo"),this.sv.setState("nomedia")},FlashController.prototype.play=function(){this.$flash[0].callFunc("playVideo"),this.setVolume(this.sv.volume)},FlashController.prototype.setRepeat=function(e){this.$flash[0].callFunc("setRepeat",{repeat:e})},FlashController.prototype.pause=function(){this.$flash[0].callFunc("pause")},FlashController.prototype.seek=function(e){this.$flash[0].callFunc("seek",{percent:e})},FlashController.prototype.setMute=function(e){e?(this.$flash[0].callFunc("mute"),this.sv.setState("volume",{volume:0})):(this.$flash[0].callFunc("unmute"),this.sv.setState("volume",{volume:this.flashVolume}))},FlashController.prototype.setVolume=function(e){this.flashVolume=e,this.$flash[0].callFunc("setVolume",{volume:this.flashVolume}),this.sv.setState("volume",{volume:this.flashVolume})},FlashController.prototype.setFullscreen=function(e){e?(this.$flash.addClass("fullscreen"),this.sv.setState("fullscreen")):(this.$flash.removeClass("fullscreen"),this.sv.setState("normalscreen"))};var api=function(){var e={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},t="webkit moz o ms khtml".split(" ");if(document.cancelFullScreen!==void 0)e.supportsFullScreen=!0;else for(var i=0,s=t.length;s>i;i++)if(e.prefix=t[i],document[e.prefix+"CancelFullScreen"]!==void 0){e.supportsFullScreen=!0;break}e.supportsFullScreen&&(e.fullScreenEventName=e.prefix+"fullscreenchange",e.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},e.requestFullScreen=function(e){return""===this.prefix?e.requestFullScreen():e[this.prefix+"RequestFullScreen"]()},e.cancelFullScreen=function(){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}),"undefined"!=typeof jQuery&&(jQuery.fn.requestFullScreen=function(){return this.each(function(){e.supportsFullScreen&&e.requestFullScreen(this)})}),window.fullScreenApi=e}();